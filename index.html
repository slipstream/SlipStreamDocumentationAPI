<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SlipStream API Documentation | SixSq</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["shell"]);
        });
      </script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-6461733-1', 'auto');
      ga('send', 'pageview');
    </script>
    
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://github.com/slipstream/SlipStreamServer'>SlipStream code is hosted on GitHub</a></li>
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
            <li><a href='http://sixsq.com'>SlipStream is developed by SixSq</a></li>
            <li><a href='http://ssdocs.sixsq.com'>Primary SlipStream Documentation</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="slipstream-api-reference">SlipStream API Reference</h1>

<p>Welcome to the SlipStream API.  It has been designed to be
comprehensive, covering all SlipStream resources, and portable,
allowing access from any programming language. The API follows REST
(<a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm">Representational State
Transfer</a>)
principles, was inspired from Richardson and Ruby&rsquo;s excellent book
<a href="http://shop.oreilly.com/product/9780596529260.do">RESTful Web
Services</a>, and
reuses the standard and universally supported HTTP protocol.</p>

<p>SlipStream predates the standardization efforts for APIs and libraries
within the cloud sector.  Consequently, the original API is unique to
SlipStream. However, as technologies have changed and the standards
have emerged, the SlipStream developers have decided to incrementally
adopt the <a href="https://www.dmtf.org/sites/default/files/standards/documents/DSP0263_2.0.0.pdf">Cloud Infrastructure Management
Interface</a>
(CIMI) maintained by DMTF (https://www.dmtf.org). As a result, the
full SlipStream API consists of two parts: a <strong>Legacy API</strong> and the
<strong>CIMI API</strong>.</p>

<p>This documentation focuses on the low-level, HTTP-based REST API.
Examples have been documented in Bash using <code class="prettyprint">curl</code>; these examples are
visible in the dark column on the right.</p>

<p>This API documentation page was created with
<a href="http://github.com/tripit/slate">Slate</a> and is hosted by <a href="https://pages.github.com">GitHub
Pages</a>.  The sources are also hosted in
GitHub, so feel free to report any snags in the <a href="http://github.com/slipstream/SlipStreamDocumentationAPI">GitHub
repository</a>.</p>

<h2 id="libraries">Libraries</h2>

<p>This documentation focuses on the low-level, HTTP-based REST API. As
the HTTP protocol is supported by all programming languages, this API
should be universally accessible. However, two language-specific
SlipStream libraries are also maintained.  These may be more
appropriate if you are using Python or Clojure.  The asynchronous part
of the Clojure library is compatible with ClojureScript.  See the
table below for information on these libraries.</p>

<table><thead>
<tr>
<th>Language</th>
<th>Sources</th>
<th>Documentation</th>
</tr>
</thead><tbody>
<tr>
<td>Python</td>
<td><a href="https://github.com/slipstream/SlipStreamPythonAPI">slipstream/SlipStreamPythonAPI</a></td>
<td><a href="http://slipstream.github.io/SlipStreamPythonAPI">Sphinx</a></td>
</tr>
<tr>
<td>Clojure(Script)</td>
<td><a href="https://github.com/slipstream/SlipStreamClojureAPI">slipstream/SlipStreamClojureAPI</a></td>
<td><a href="http://slipstream.github.io/SlipStreamClojureAPI/">autodoc</a></td>
</tr>
</tbody></table>

<p>For those people using Python, there is also a SlipStream plugin for
<a href="https://libcloud.apache.org">Apache Libcloud</a> available.  The plugin
is published in
<a href="https://pypi.python.org/pypi/slipstream-libcloud-driver">PyPi</a> with
<a href="https://slipstream.github.io/slipstream-libcloud-driver/">separate
documentation</a>.</p>

<h1 id="legacy-api">Legacy API</h1>

<p>The legacy API follows REST principles where each resource corresponds
to a URL and standard HTTP methods are used to manage those resources.
In general, the resource URLs that identify collections follow the
pattern:</p>

<p><code class="prettyprint">https://nuv.la/&lt;type&gt;?query-param=value</code></p>

<p>and those identifying individual resources:</p>

<p><code class="prettyprint">https://nuv.la/&lt;type&gt;/&lt;id&gt;?query-param=value</code></p>

<p>where the <code class="prettyprint">&lt;type&gt;</code> corresponds to the resource type and <code class="prettyprint">&lt;id&gt;</code>, to the
resource identifier.  Note that the resource identifier can have
multiple components.  In the case of modules, the last part of the
resource identifier is a unique version number.</p>

<h2 id="resource-management-(crud)">Resource Management (CRUD)</h2>

<p>The standard HTTP methods are used to perform Search, Create, Read,
Update, and Delete (SCRUD) operations on the resources.  The mapping
between the SCRUD actions and HTTP methods are shown in the following
table. Details are provided in the description of each
resource. <strong>Those resources <em>without</em> a CIMI notation follow the
patterns of the legacy API.</strong></p>

<table><thead>
<tr>
<th>Action</th>
<th>HTTP Method</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>Search</td>
<td>GET</td>
<td>resource collection</td>
</tr>
<tr>
<td>Create</td>
<td>POST</td>
<td>resource collection</td>
</tr>
<tr>
<td>Read</td>
<td>GET</td>
<td>resource</td>
</tr>
<tr>
<td>Update</td>
<td>PUT</td>
<td>resource</td>
</tr>
<tr>
<td>Delete</td>
<td>DELETE</td>
<td>resource</td>
</tr>
</tbody></table>

<h2 id="media-types">Media Types</h2>

<blockquote>
<p>Adding <code class="prettyprint">?media=xml</code>(for XML) at the end of the URL in the browser,
  you request the response to be returned in the specified
  content-type, for example:</p>
</blockquote>
<pre><code class="highlight shell">curl https://nuv.la/run?media<span class="o">=</span>xml
</code></pre>

<blockquote>
<p>is equivalent to</p>
</blockquote>
<pre><code class="highlight shell">curl https://nuv.la/run -H <span class="s2">"Content-Type: application/xml"</span>
</code></pre>

<p>Generally, the legacy API accepts and returns documents in XML
format. However, some resources can return HTML and/or JSON.  You can
control the media type of returned documents by adding an &ldquo;accept&rdquo;
header to the HTTP request. Within a browser, the same can be done by
adding a &ldquo;media&rdquo; query parameter. If the requested media type is not
available, then XML will be returned instead. </p>

<h2 id="skeleton-(new)-resources">Skeleton (<em>new</em>) Resources</h2>
<pre><code class="highlight shell">curl https://nuv.la/module/examples/new?category<span class="o">=</span>Image login -d <span class="nv">username</span><span class="o">=</span>&lt;USER&gt; -d <span class="nv">password</span><span class="o">=</span>&lt;PASSWORD&gt;
</code></pre>

<blockquote>
<p>The above command returns a response body structured like this:</p>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;imageModule</span> <span class="na">category=</span><span class="s">"Image"</span> <span class="na">creation=</span><span class="s">"2014-05-12 09:59:36.354 UTC"</span> <span class="na">deleted=</span><span class="s">"false"</span> <span class="na">isBase=</span><span class="s">"false"</span> <span class="na">isLatestVersion=</span><span class="s">"false"</span> <span class="na">loginUser=</span><span class="s">""</span> <span class="na">parentUri=</span><span class="s">"module/Mebster"</span> <span class="na">platform=</span><span class="s">""</span> <span class="na">shortName=</span><span class="s">"new"</span> <span class="na">version=</span><span class="s">"-1"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;parameters&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>instanceid<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"Output"</span> <span class="na">description=</span><span class="s">"Cloud instance id"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"instanceid"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>extra.disk.volatile<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"Cloud"</span> <span class="na">description=</span><span class="s">"Volatile extra disk in GB"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"extra.disk.volatile"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>ec2-eu-west.instance.type<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"ec2-eu-west"</span> <span class="na">description=</span><span class="s">"Cloud instance type"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"ec2-eu-west.instance.type"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"Enum"</span><span class="nt">&gt;</span>
                               <span class="nt">&lt;enumValues</span> <span class="na">length=</span><span class="s">"10"</span><span class="nt">&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m1.small<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m1.large<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m1.xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>c1.medium<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>c1.xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m2.xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m2.2xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>m2.4xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>cc1.4xlarge<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>t1.micro<span class="nt">&lt;/string&gt;</span>
                               <span class="nt">&lt;/enumValues&gt;</span>
                       <span class="nt">&lt;/parameter&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>exoscale-ch-gva.security.groups<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">description=</span><span class="s">"Security Groups (comma separated list)"</span> <span class="na">isSet=</span><span class="s">"true"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"exoscale-ch-gva.security.groups"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">&gt;</span>
                               <span class="nt">&lt;value&gt;</span>default<span class="nt">&lt;/value&gt;</span>
                               <span class="nt">&lt;defaultValue&gt;</span>default<span class="nt">&lt;/defaultValue&gt;</span>
                       <span class="nt">&lt;/parameter&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>ec2-eu-west.security.group<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"ec2-eu-west"</span> <span class="na">description=</span><span class="s">"Security groups (comma separated list)"</span> <span class="na">isSet=</span><span class="s">"true"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"ec2-eu-west.security.group"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">&gt;</span>
                               <span class="nt">&lt;value&gt;</span>default<span class="nt">&lt;/value&gt;</span>
                               <span class="nt">&lt;defaultValue&gt;</span>default<span class="nt">&lt;/defaultValue&gt;</span>
                       <span class="nt">&lt;/parameter&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>network<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"Cloud"</span> <span class="na">description=</span><span class="s">"Network type"</span> <span class="na">isSet=</span><span class="s">"true"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"network"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"Enum"</span><span class="nt">&gt;</span>
                               <span class="nt">&lt;enumValues</span> <span class="na">length=</span><span class="s">"2"</span><span class="nt">&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>Public<span class="nt">&lt;/string&gt;</span>
                                       <span class="nt">&lt;string&gt;</span>Private<span class="nt">&lt;/string&gt;</span>
                               <span class="nt">&lt;/enumValues&gt;</span>
                               <span class="nt">&lt;value&gt;</span>Public<span class="nt">&lt;/value&gt;</span>
                               <span class="nt">&lt;defaultValue&gt;</span>Public<span class="nt">&lt;/defaultValue&gt;</span>
                       <span class="nt">&lt;/parameter&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>exoscale-ch-gva.instance.type<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">description=</span><span class="s">"Instance type (flavor)"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"exoscale-ch-gva.instance.type"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
               <span class="nt">&lt;entry&gt;</span>
                       <span class="nt">&lt;string&gt;</span>hostname<span class="nt">&lt;/string&gt;</span>
                       <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"Output"</span> <span class="na">description=</span><span class="s">"hostname/ip of the image"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"hostname"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
               <span class="nt">&lt;/entry&gt;</span>
       <span class="nt">&lt;/parameters&gt;</span>
       <span class="nt">&lt;authz</span> <span class="na">groupCreateChildren=</span><span class="s">"false"</span> <span class="na">groupDelete=</span><span class="s">"false"</span> <span class="na">groupGet=</span><span class="s">"false"</span> <span class="na">groupPost=</span><span class="s">"false"</span> <span class="na">groupPut=</span><span class="s">"false"</span> <span class="na">inheritedGroupMembers=</span><span class="s">"true"</span> <span class="na">owner=</span><span class="s">"meb"</span> <span class="na">ownerCreateChildren=</span><span class="s">"true"</span> <span class="na">ownerDelete=</span><span class="s">"true"</span> <span class="na">ownerGet=</span><span class="s">"true"</span> <span class="na">ownerPost=</span><span class="s">"true"</span> <span class="na">ownerPut=</span><span class="s">"true"</span> <span class="na">publicCreateChildren=</span><span class="s">"false"</span> <span class="na">publicDelete=</span><span class="s">"false"</span> <span class="na">publicGet=</span><span class="s">"false"</span> <span class="na">publicPost=</span><span class="s">"false"</span> <span class="na">publicPut=</span><span class="s">"false"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;groupMembers</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;/authz&gt;</span>
       <span class="nt">&lt;cloudNames</span> <span class="na">length=</span><span class="s">"3"</span><span class="nt">&gt;</span>
               <span class="nt">&lt;string&gt;</span>exoscale-ch-gva<span class="nt">&lt;/string&gt;</span>
               <span class="nt">&lt;string&gt;</span>ec2-eu-west<span class="nt">&lt;/string&gt;</span>
               <span class="nt">&lt;string&gt;</span>default<span class="nt">&lt;/string&gt;</span>
       <span class="nt">&lt;/cloudNames&gt;</span>
       <span class="nt">&lt;runs/&gt;</span>
       <span class="nt">&lt;targets</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;packages</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;prerecipe/&gt;</span>
       <span class="nt">&lt;recipe/&gt;</span>
       <span class="nt">&lt;cloudImageIdentifiers</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/imageModule&gt;</span>
</code></pre>

<p>To retrieve example resource structures, especially for resource types that don&rsquo;t yet exist,
you can use the special <em>new</em> resource.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://nuv.la/&lt;type&gt;/new[?category=&lt;category&gt;]</code></p>

<h3 id="url-parameter">Url Parameter</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>true</td>
<td>Type of resource to retrieve (e.g. module, user)</td>
</tr>
</tbody></table>

<h3 id="query-parameter">Query Parameter</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>category</td>
<td>false</td>
<td>Only required for <em>module</em> &lt;type&gt;. Can be: <em>Project</em> (default), <em>Image</em> or <em>Deployment</em>.</td>
</tr>
</tbody></table>

<aside class="notice">
On the root module resource (i.e. /module), only project category can be requested.
</aside>

<aside class="notice">
This also means that <em>new</em> is a reserved word and modules and users cannot be called new.
</aside>

<h1 id="cimi-api">CIMI API</h1>

<p>The <a href="https://www.dmtf.org/sites/default/files/standards/documents/DSP0263_2.0.0.pdf">Cloud Infrastructure Management
Interface</a>
(CIMI) specification from DMTF describes a uniform, extensible,
RESTful (HTTP) API for the management of cloud resources.</p>

<p>As CIMI&rsquo;s underlying resource model closely resembles the existing
SlipStream resource model and simplifies use of the API through
standard patterns and autodiscovery, the SlipStream developers have
decided to adopt this standard.</p>

<aside class="notice">
All of the resources rooted at &ldquo;/api&rdquo; follow the CIMI resource
management patterns. These are marked with &ldquo;CIMI&rdquo; in the table of
contents. 
</aside>

<h2 id="autodiscovery">Autodiscovery</h2>

<p>The CIMI API has been designed to allow for automatic discovery of the
supported resources and management operations.</p>

<h3 id="resource-directory">Resource Directory</h3>
<pre><code class="highlight shell"><span class="c"># Cloud Entry Point (directory of resources)</span>
curl https://nuv.la/api/cloud-entry-point
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"cloud-entry-point"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://schemas.dmtf.org/cimi/2/CloudEntryPoint"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-21T17:31:14.950Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-21T17:31:14.950Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"baseURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"https://nuv.la/api/"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"connectors"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"connector"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"accountingRecords"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"accounting-record"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 

  </span><span class="s2">"other fields"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The primary directory of resources is the <strong>Cloud Entry Point</strong> (CEP),
which contains a list of named resource collections and their URLs (in
the <code class="prettyprint">href</code> field) relative to the <code class="prettyprint">baseURI</code> value.  The CEP also
contains some other metadata.</p>

<aside class="warning">
Although SlipStream maintains consistent naming throughout the API,
assumptions about the URL naming must not be made by clients. Clients
must use the CEP to discover the correct URLs for managed resources.
</aside>

<h3 id="operations">Operations</h3>

<p>If the user is authorized to perform various management operations on
a resource, the resource will contain an &ldquo;operations&rdquo; key.  The value
of the key will contain a list of actions (e.g. <code class="prettyprint">add</code>, <code class="prettyprint">edit</code>,
<code class="prettyprint">delete</code>, <code class="prettyprint">start</code>) along with the URL to use to execute the action.</p>

<p>The HTTP methods to use for the CIMI <code class="prettyprint">add</code>, <code class="prettyprint">edit</code>, and <code class="prettyprint">delete</code>
operations are POST, PUT, and DELETE, respectively.  All other
operations use the HTTP POST method.</p>

<h2 id="resource-management-(crud)">Resource Management (CRUD)</h2>

<p>The CIMI standard defines patterns for all of the usual database
actions: Search (or Query), Create, Read, Update, and Delete (SCRUD),
although the specification uses &ldquo;Add&rdquo; for &ldquo;Create&rdquo; and &ldquo;Edit&rdquo; for
&ldquo;Update&rdquo;.</p>

<p><strong>See Section 4.2.1 of the CIMI specification for detailed
descriptions of these patterns.</strong>  Only differences from the standard
patterns are documented here.</p>

<h3 id="http-methods">HTTP Methods</h3>

<p>The following table shows the mapping between the resource management
action and the HTTP method to be used. <strong>Those resources <em>with</em> a CIMI
notation follow the CIMI patterns.</strong></p>

<table><thead>
<tr>
<th>Action</th>
<th>HTTP Method</th>
<th>URL</th>
</tr>
</thead><tbody>
<tr>
<td>Search</td>
<td><code class="prettyprint">GET</code> or <code class="prettyprint">PUT</code></td>
<td>resource collection</td>
</tr>
<tr>
<td>Add (create)</td>
<td><code class="prettyprint">POST</code></td>
<td>resource collection</td>
</tr>
<tr>
<td>Read</td>
<td><code class="prettyprint">GET</code></td>
<td>resource</td>
</tr>
<tr>
<td>Edit (update)</td>
<td><code class="prettyprint">PUT</code></td>
<td>resource</td>
</tr>
<tr>
<td>Delete</td>
<td><code class="prettyprint">DELETE</code></td>
<td>resource</td>
</tr>
<tr>
<td>Other</td>
<td><code class="prettyprint">POST</code></td>
<td>operation URL</td>
</tr>
</tbody></table>

<aside class="notice">

Specialized actions can appear in the operations section of a
resource.  Any non-standard operation will use the POST method for the
request.  The parameters (if any) will depend on the operation. 

</aside>

<h3 id="add-pattern-variations">Add Pattern Variations</h3>

<p>Note that there are two CIMI add (create) patterns:</p>

<ul>
<li><p><strong>Direct creation</strong> that takes uses the new resource&rsquo;s content
directly in the creation request, and</p></li>
<li><p><strong>Templated creation</strong> that uses a template to create the resource.</p></li>
</ul>

<p>In the Cloud Entry Point, <strong>any resource that has a corresponding
template resource will use the templated add pattern</strong>. For example,
the Session resource will use the templated add pattern because there
is a SessionTemplate resource also listed.</p>

<h2 id="resource-selection">Resource Selection</h2>

<p>The CIMI specification provides advanced features for selecting
resources when searching collections, including paging (CIMI Section
4.1.6.2), subsetting (4.1.6.3), sorting (4.1.6.6), and filtering
(4.1.6.1).</p>

<p>All of the resource selection parameters are specified as HTTP query
parameters.  These are specified directly within the URL when using
the HTTP <code class="prettyprint">GET</code> method.  They are specified in a body with the media
type of <code class="prettyprint">application/x-www-form-urlencoded</code> when using the <code class="prettyprint">PUT</code>
method. (Note that use of <code class="prettyprint">PUT</code> for searches is an SlipStream
extension to the CIMI standard.)</p>

<aside class="warning">
All of the CIMI query parameters are prefixed with a dollar sign
($). This was an unfortunate choice because it signals variable
interpolation in most shells.  When using these parameters at the
command line, be sure to escape the dollar signs or to put the
parameters within single quotes.
</aside>

<h3 id="ordering">Ordering</h3>

<p>The results can be ordered by the values of fields within the
resources.  The general form of a query with ordering is:</p>

<p><code class="prettyprint">$orderby=attributeName[:asc|:desc], ...</code></p>

<p>The ascending (:asc, default) or descending (:desc) field is
optional.  The sorting is done using the natural order of the field
values. Multiple <code class="prettyprint">$orderby</code> parameters are allowed, in which case
resources are sorted by the first attribute, then equal values are
sorted by the second attribute, etc. </p>

<h3 id="paging">Paging</h3>

<p>A range of resources can be obtained by setting the <code class="prettyprint">$first</code> and
<code class="prettyprint">$last</code> (1-based) query parameters.  The values default to the first
and last resources, respectively, in the collection if explicit values
are not provided.</p>

<aside class="notice">
Note that the SlipStream implementation will limit the number of
returned resources to 10000, independently of the values provided for
these parameters.  This is to protect both the client and server from
excessively large responses.
</aside>

<aside class="notice">
The selection of resources via these parameters is done after any
filtering and ordering.
</aside>

<h3 id="subsetting">Subsetting</h3>

<p>Using the <code class="prettyprint">$select</code> parameter allows you to select only certain
attributes to be returned by the server.  Avoiding sending information
that will not be useful reduces the load on the network and the
server.</p>

<p>Multiple attributes may be specified by providing a string with
comma-separated values or with multiple <code class="prettyprint">$select</code> parameters.</p>

<aside class="notice">
For various reasons, the server may return attributes that you have
not selected in the responses.  The server should always return the
selected attributes.
</aside>

<blockquote>
<p>Example select values</p>
</blockquote>
<pre><code class="highlight c"><span class="n">name</span><span class="p">,</span><span class="n">description</span>
</code></pre>

<h3 id="filtering">Filtering</h3>

<blockquote>
<p>Example filters</p>
</blockquote>
<pre><code class="highlight c"><span class="p">((</span><span class="n">alpha</span><span class="o">&gt;</span><span class="mi">2</span><span class="p">)</span> <span class="n">and</span> <span class="p">(</span><span class="n">beta</span><span class="o">&gt;=</span><span class="err">'</span><span class="n">bad</span> <span class="n">value</span><span class="err">'</span><span class="p">)</span> <span class="n">or</span> <span class="p">(</span><span class="n">nested</span><span class="o">/</span><span class="n">value</span><span class="o">!=</span><span class="nb">false</span><span class="p">)</span>
</code></pre>
<pre><code class="highlight c"><span class="p">((</span><span class="n">property</span><span class="p">[</span><span class="err">'</span><span class="n">alpha</span><span class="err">'</span><span class="p">]</span><span class="o">=</span><span class="s">"OK"</span><span class="p">)</span> <span class="n">or</span> <span class="p">(</span><span class="n">missing</span><span class="o">=</span><span class="n">null</span><span class="p">))</span>
</code></pre>

<p>The CIMI specification defines a simple, but powerful, filtering
language to make sophisticated selections of resources. (See Section
4.1.6.1 of the full <a href="https://www.dmtf.org/sites/default/files/standards/documents/DSP0263_2.0.0.pdf">CIMI
specification</a>.)
The syntax of the <code class="prettyprint">$filter</code> query parameter consists of infix binary
comparisons combined with <code class="prettyprint">and</code> or <code class="prettyprint">or</code> operators. Parentheses can be
used to force the ordering of operations.  Whitespace is ignored.</p>

<p>The following tables list the supported relational operators and
types. All comparisons use the natural ordering of the data type.</p>

<table><thead>
<tr>
<th>operator</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>=</td>
<td>equal</td>
</tr>
<tr>
<td>!=</td>
<td>not equal</td>
</tr>
<tr>
<td>&lt;</td>
<td>less than</td>
</tr>
<tr>
<td>&lt;=</td>
<td>less than or equal</td>
</tr>
<tr>
<td>&gt;</td>
<td>greater than</td>
</tr>
<tr>
<td>&gt;=</td>
<td>greater than or equal</td>
</tr>
<tr>
<td>^=</td>
<td>starts with (SlipStream extension)</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>type</th>
<th>comment</th>
</tr>
</thead><tbody>
<tr>
<td>integer</td>
<td>integer values</td>
</tr>
<tr>
<td>string</td>
<td>single or double-quoted strings</td>
</tr>
<tr>
<td>date</td>
<td>date in ISO8601 format</td>
</tr>
<tr>
<td>boolean</td>
<td>either true or false</td>
</tr>
<tr>
<td>null</td>
<td>null values (SlipStream extension)</td>
</tr>
</tbody></table>

<p>The SlipStream filtering implementation is a superset of the CIMI
filtering specification.  These extentions include:</p>

<ul>
<li>The arguments for binary operators can be specified in either order
(attribute, value or value, attribute).</li>
<li>&ldquo;null&rdquo; is supported as a literal value to allow the
existence/non-existence of a value to be determined.</li>
<li>A &ldquo;prefix&rdquo; or &ldquo;starts with&rdquo; operator (&ldquo;^=&rdquo;) is supported. This was
judged to be generally useful and was easy to implement for
Elasticsearch.</li>
<li>Nested attributes are supported with levels separated by slashes
(&rsquo;/&rsquo;). This syntax is used elsewhere in the CIMI standard, but not
specifically mentioned in the filter specification.</li>
</ul>

<p>The filter syntax may be extended in the future to also support the
&ldquo;not&rdquo; logical operation.</p>

<p>The <a href="https://raw.githubusercontent.com/slipstream/SlipStreamServer/master/cimi/resources/com/sixsq/slipstream/ssclj/filter/cimi-filter-grammar.txt">full
grammar</a>
of our extended CIMI filtering is documented in GitHub.</p>

<h3 id="aggregations">Aggregations</h3>

<p>The SlipStream CIMI implementation also allows users to aggregate
values over a set of filtered documents.  This is useful for providing
summary information concerning a set of documents, such as the sum of
an attribute, average, etc.</p>

<p>The general form of a query with an aggregation is:</p>

<p><code class="prettyprint">$aggregation=algorithm:attributeName, ...</code></p>

<p>Multiple aggregation expressions can be provided.  The results of
these calculations are provided in the &ldquo;aggregations&rdquo; section of the
response. The supported aggregations are described in the following
table.</p>

<table><thead>
<tr>
<th>algorithm</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>min</td>
<td>minimum value</td>
</tr>
<tr>
<td>max</td>
<td>maximum value</td>
</tr>
<tr>
<td>sum</td>
<td>sum of values</td>
</tr>
<tr>
<td>avg</td>
<td>average of values</td>
</tr>
<tr>
<td>stats</td>
<td>statistics of values</td>
</tr>
<tr>
<td>extendedstats</td>
<td>extended statistics of values</td>
</tr>
<tr>
<td>count</td>
<td>number of values/documents</td>
</tr>
<tr>
<td>percentiles</td>
<td>binned percentiles of values</td>
</tr>
<tr>
<td>cardinality</td>
<td>cardinality of a field</td>
</tr>
<tr>
<td>missing</td>
<td>number of documents with missing field</td>
</tr>
<tr>
<td>terms</td>
<td>histogram of values and counts</td>
</tr>
</tbody></table>

<h2 id="deviations">Deviations</h2>

<p>SlipStream does not (yet) provide a complete implementation of the
CIMI API and out of necessity deviates in several ways from the
standard.</p>

<h3 id="media-types">Media Types</h3>

<p>The CIMI standard mandates the support of both XML and JSON.  <strong>The
SlipStream implementation only supports JSON</strong> (and in some cases
URL-encoded forms). </p>

<h3 id="authorization">Authorization</h3>

<p>The CIMI standard does not mandate any authentication and
authorization process. The schema of all resources in the SlipStream
implementation includes an &ldquo;acl&rdquo; key.  <strong>The Access Control List (ACL)
of each resource describes who is authorized to manage that
resource.</strong></p>

<h3 id="searches">Searches</h3>

<p>The CIMI standard only provides for searches over resource collections
with the HTTP <code class="prettyprint">GET</code> method.  Because those filters can be quite long,
there can be issues with the length of the <code class="prettyprint">GET</code> URL. Consequently,
SlipStream clients may also <strong>search resource collections using the
HTTP <code class="prettyprint">PUT</code> method</strong> with a body containing the filters (and other
parameters) as a URL-encoded form.</p>

<h3 id="aggregations">Aggregations</h3>

<p>As described earlier, SlipStream extends the CIMI standard to also
include aggregating values over a collection of resources.</p>

<h1 id="authentication">Authentication</h1>

<p>Most SlipStream resources are only visible to authenticated users.
The login process consists of creating a &ldquo;session&rdquo; resource via the
standard CIMI templated add pattern and then using the returned token
with subsequent interactions with the SlipStream server.  The details
are covered in the sections for the Session and SessionTemplate
resources.</p>

<p>The supported Python and Clojure(Script) libraries (see
<a href="#libraries">Libraries</a>) directly use the REST API defined here for
Session management, but also provide higher-level functions that
simplify the authentication process.</p>

<h2 id="sessiontemplate-(cimi)">SessionTemplate (CIMI)</h2>
<pre><code class="highlight shell"><span class="c"># List all of the configured authentication mechanisms</span>
<span class="c">#</span>
curl https://nuv.la/api/session-template
</code></pre>
<pre><code class="highlight shell"><span class="c"># You can get more details by using the "describe" action.</span>
<span class="c">#</span>
curl https://nuv.la/api/session-template/internal/describe
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"common"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"short, human-readable description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mandatory"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"readOnly"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"order"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"properties"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Properties"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"common"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user-defined properties"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"map"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mandatory"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"readOnly"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"order"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"group"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"displayName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Authentication Group"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"general"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"optional label to group authentication methods"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mandatory"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"readOnly"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"order"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="s2">"more"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"values..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>SlipStream supports a wide variety of methods for authenticating with
the server.  The SessionTemplate resources represent the supported
authentication methods for a given SlipStream server.</p>

<p>The SlipStream <strong>administrator</strong> defines the available methods by
creating SessionTemplate resources on the server via the standard CIMI
&ldquo;add&rdquo; pattern (and in most cases an associated Configuration
resource). These can also be &ldquo;edited&rdquo; and &ldquo;deleted&rdquo; by the SlipStream
administrator.</p>

<p><strong>All users (including anonymous users)</strong> can list the
SessionTemplates to discover supported authentication methods. These
resources also support a &ldquo;describe&rdquo; action that provides a document
with a detail description of authentication parameters.</p>

<p>One SessionTemplate that will always exist on the server is the
&ldquo;session-template/internal&rdquo; resource.  This allows logging into the
server with a username and password pair stored in SlipStream&rsquo;s
internal database. </p>

<h2 id="session-(cimi)">Session (CIMI)</h2>

<blockquote>
<p>An example document (named <code class="prettyprint">create-internal.json</code> below) for
  authenticating via the &ldquo;internal&rdquo; (username and password) method.</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"sessionTemplate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"session-template/internal"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"username"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"your-username"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"password"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"your-password"</span><span class="w">
                      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>A similar document for logging into with an API key/secret (named
  <code class="prettyprint">create-api-key.json</code>). Verify the name of the template on the
  server; the administrator may have chosen a different name.</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"sessionTemplate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"session-template/api-key"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"key"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"your-api-key"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"secret"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"your-api-secret"</span><span class="w">
                      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight shell"><span class="c"># Be sure to get the URL from the cloud entry point!</span>
<span class="c"># The cookie options allow for automatic management of the</span>
<span class="c"># SlipStream authentication token (cookie).</span>
curl https://nuv.la/api/session <span class="se">\</span>
     -X POST <span class="se">\</span>
     -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
     -d @create-internal.json <span class="se">\</span>
     --cookie-jar ~/cookies -b ~/cookies -sS
</code></pre>

<blockquote>
<p>On a successful authentication, the above command will return a 201
  (created) status, a &ldquo;set-cookie&rdquo; header, and a &ldquo;location&rdquo; header
  with the created session.</p>
</blockquote>

<p>Users (clients) authenticate with the SlipStream server by referencing
a SessionTemplate resource (to identify the authentication method),
providing values for the associated parameters, and then creating a
Session resource via the CIMI &ldquo;add&rdquo; pattern.  A successful
authentication attempt will return a token (as an HTTP cookie) that
must be used in subsequent interactions with the SlipStream server.</p>

<p>The detailed process consists of the following steps:</p>

<ol>
<li><p>Browse the SessionTemplate resources to find the authentication
method that you want to use.  Unless you have a browser-based
client, you will probably want to use either &ldquo;internal&rdquo; (username
and password) or &ldquo;api-key&rdquo; (API key and secret).  <strong>Use of API keys
and secrets is preferred over the username and password.</strong></p></li>
<li><p>Prepare a &ldquo;create&rdquo; JSON document that references the
SessionTemplate you have chosen and provides the corresponding
parameters (e.g. username and password for &ldquo;internal&rdquo;).</p></li>
<li><p>Post the &ldquo;create&rdquo; document to the Session collection URL. The
correct URL can be determined from the CEP information.</p></li>
<li><p>On a successful authentication request, a token will be returned
allowing access to the SlipStream resources as the authenticated
user.  <strong>For convenience, this token is returned as an HTTP
cookie.</strong></p></li>
</ol>

<p>The authentication token (cookie) must be used in all subsequent
requests to the SlipStream server.  The token (cookie) has a <strong>limited
lifetime</strong> and you must re-authenticate with the server when the token
expires.</p>

<aside class="notice">
To facilitate use of the API from browsers (i.e. javascript), the
session resources also support request bodies with a media type of
&ldquo;application/x-www-form-urlencoded&rdquo;.  When using this media type,
encode only the value of the &ldquo;sessionTemplate&rdquo; key in the example JSON
forms.
</aside>

<aside class="notice">
The search feature of Session resources will only return the Session
resource associated with your current session (or none at all if your
are not authenticated).  This can be used to determine whether or not
you have an active session.
</aside>

<h2 id="credential-template-(cimi)">Credential Template (CIMI)</h2>
<pre><code class="highlight shell"><span class="c"># List all of the credential creation mechanisms</span>
<span class="c"># NOTE: You must be authenticated.  Add the appropriate</span>
<span class="c"># cookie options to the curl command.</span>
<span class="c">#</span>
curl https://nuv.la/api/credential-template
</code></pre>
<pre><code class="highlight shell"><span class="c"># You can get more details by using the "describe" action.</span>
<span class="c"># NOTE: You must be authenticated.  Add the appropriate</span>
<span class="c"># cookie options to the curl command.</span>
<span class="c">#</span>
curl https://nuv.la/api/credential-template/generate-api-key/describe
</code></pre>

<p>SlipStream must manage a variety of credentials to provide, for
example, programmatic access to SlipStream or SSH access to virtual
machines running on a cloud infrastructure.  The CredentialTemplate
resources correspond to the various methods that can be used to create
these resources.</p>

<p>The parameters required can be found within each template, using the
standard CIMI read pattern.  Details for each parameter can be found
by invoking the &ldquo;describe&rdquo; action on the resource.</p>

<table><thead>
<tr>
<th>Template</th>
<th>Credential</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>import-ssh-public-key</td>
<td>ssh-public-key</td>
<td>imports an SSH public key from an existing key pair</td>
</tr>
<tr>
<td>generate-ssh-key-pair</td>
<td>ssh-public-key</td>
<td>generates a new SSH key pair, storing public key and returning private key</td>
</tr>
<tr>
<td>generate-api-key</td>
<td>api-key</td>
<td>generates API key and secret, storing secret digest and returning secret</td>
</tr>
</tbody></table>

<p>Typically, there will also be Credential Template resources
that describe the credentials for each supported cloud
infrastructure. </p>

<h2 id="credential-(cimi)">Credential (CIMI)</h2>

<p>SlipStream can manage credentials that are needed to access SlipStream
or other services.  Currently, SlipStream manages SSH public keys and
API keys and secrets.  Creating new Credential resources requires
referencing a CredentialTemplate resource. </p>

<h3 id="ssh-public-key">SSH Public Key</h3>

<blockquote>
<p>An example document (named <code class="prettyprint">create.json</code> below) for creating
  a new SSH key pair.</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"credentialTemplate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                           </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"credential-template/generate-ssh-key-pair"</span><span class="w">
                         </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight shell"><span class="c"># Be sure to get the URL from the cloud entry point!</span>
<span class="c"># The cookie options allow for automatic management of the</span>
<span class="c"># SlipStream authentication token (cookie).</span>
curl https://nuv.la/api/credential <span class="se">\</span>
     -X POST <span class="se">\</span>
     -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
     -d @create.json <span class="se">\</span>
     --cookie-jar ~/cookies -b ~/cookies -sS
</code></pre>

<blockquote>
<p>On a successful authentication, the above command will return a 201
  (created) status, a &ldquo;location&rdquo; header with the created credential
  resource, and a JSON document containing the SSH private key of the
  generated key pair.</p>
</blockquote>

<p>The &ldquo;ssh-public-key&rdquo; Credential resource stores the public key (in
OpenSSH format), the algorithm used to create the key (&ldquo;rsa&rdquo; or
&ldquo;dsa&rdquo;), and the fingerprint of the key itself.  You can create any
number of SSH public key credentials on the server.</p>

<p>These resources can be created either by providing the public key of
an existing SSH key pair or by having the server generate a new SSH
key pair.  In the second case, the server will provide the private key
in the 201 (created) response.</p>

<aside class="notice">
When the server generates a new SSH key pair, the server returns the
private key in the response. The server does not store this private
key, so you must capture and save the key from this response!
</aside>

<h3 id="api-key-and-secret">API Key and Secret</h3>

<blockquote>
<p>An example document (named <code class="prettyprint">create.json</code> below) for creating
  an API key and secret with a lifetime of 1 day (86400 seconds).</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"credentialTemplate"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                           </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"credential-template/generate-api-key"</span><span class="p">,</span><span class="w">
                           </span><span class="s2">"ttl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="w">
                         </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<pre><code class="highlight shell"><span class="c"># Be sure to get the URL from the cloud entry point!</span>
<span class="c"># The cookie options allow for automatic management of the</span>
<span class="c"># SlipStream authentication token (cookie).</span>
curl https://nuv.la/api/credential <span class="se">\</span>
     -X POST <span class="se">\</span>
     -H <span class="s1">'content-type: application/json'</span> <span class="se">\</span>
     -d @create.json <span class="se">\</span>
     --cookie-jar ~/cookies -b ~/cookies -sS
</code></pre>

<blockquote>
<p>On a successful authentication, the above command will return a 201
  (created) status, a &ldquo;location&rdquo; header with the created credential
  resource, and a JSON document containing the plain text secret.</p>
</blockquote>

<p>It is often useful to have credentials to log into the SlipStream
server that are independent of your account credentials.  This allows
you, for example, to provide time-limited access or to revoke access
at any time without affecting the access to your account with your
main credentials.</p>

<p>For users who authenticate with external authentication mechanisms, an
API key and secret is mandatory for programmic access to SlipStream,
as the external authentication mechanisms usually cannot be used
with the API.</p>

<p>The example shows how to create an API key and secret credential.</p>

<aside class="notice">
When the server generates a new API key and secret, the server returns
the plain text secret in the response. The server stores only a digest
of the secret, so you must capture and save the plain text secret from
this response! 
</aside>

<h1 id="service-catalog">Service Catalog</h1>

<p>The Service Catalog consists of several resources that allow users to
view (and to select) the offers provided by the underlying cloud
service providers.  The SlipStream deployment process selects offers
from the Service Catalog that match the resource requirements of a
particular application, presents the alternatives to the users, and,
after user selection, provisions the corresponding cloud resources.</p>

<h2 id="service-offer-(cimi)">Service Offer (CIMI)</h2>

<blockquote>
<p>An example service offer from the Open Telekom Cloud (OTC).</p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"service-offer/0b2a46dd-f8c8-4420-a851-519daa581a1d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"(4/4096/800 c1.xlarge windows) [DE]"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VM (standard) with 4 vCPU, 4096 MiB RAM, 800 GiB root disk, windows [DE] (c1.xlarge)"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-06-26T11:13:42.883Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-05T15:17:55.005Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"connector"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"open-telekom-de1"</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="s2">"price:billingPeriodCode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MIN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price:billingUnitCode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"HUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price:currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price:freeUnits"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price:unitCost"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">0.38711111111111113</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price:unitCode"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"C62"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"resource:class"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"standard"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:country"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DE"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:diskType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SATA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:instanceType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"c1.xlarge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:operatingSystem"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"windows"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:platform"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"openstack"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:ram"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4096</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource:vcpu"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">

  </span><span class="s2">"otc:instanceType"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"c1.xlarge"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"otc:flavorPurpose"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Compute I Nr. 3"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Show all of the ServiceOffer resources from the &ldquo;exoscale-ch-gva&rdquo;
  cloud that provide more than 4096 MB of RAM.  Be sure to escape the
  dollar sign in the <code class="prettyprint">$filter</code> query parameter!</p>
</blockquote>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/service-offer?$filter=connector/href="exoscale-ch-gva" and resource:ram&gt;4096'</span>
</code></pre>

<p>The ServiceOffer resource is the primary resource in the Service
Catalog.  Each offer describes a specific resource offer from a cloud
service provider.  The specific offer for a virtual machine would
typically describe the offer&rsquo;s CPU, RAM, and disk resources, the
geographical location, and the price.</p>

<p>In the example offer from the Open Telekom Cloud (OTC), you can see
three types of information: metadata (e.g. id, name), the cloud
connector (in connector/href), and the cloud characteristics
(e.g. price:unitCost, resource:country).</p>

<p>The schema for the cloud characteristics is open, allowing cloud
providers to supply any information that is useful for users. The only
requirement is that these attributes must be namespaced.  The
namespaces <strong>must</strong> be defined in a ServiceAttributeNamespace
resources and the attribute itself <strong>may</strong> be described in a
ServiceAttribute resource.</p>

<p>Currently, only SlipStream administrators can add, update, or delete
ServiceOffer resources.  The standard CIMI patterns for these actions
apply to these resources.  Most users will search the ServiceOffer
entries by using a filter expression on the ServiceOffer collection.
The example searches for all ServiceOffers from the &ldquo;exoscale-ch-gva&rdquo;
cloud with more than 4096 MB of RAM. </p>

<h2 id="service-benchmark-(cimi)">Service Benchmark (CIMI)</h2>

<blockquote>
<p>An example service benchmark showing the Whetstone and Dhrystone
  benchmarks for an instance at Exoscale.</p>
</blockquote>
<pre><code class="highlight json"><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service-benchmark/25de61b0-0a54-41ab-b8da-d2846194da13"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/ServiceBenchmark"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-03T19:36:16.962Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-10-03T19:36:16.962Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"credentials"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credential/51f3ed99-c46e-43c8-9926-b8b64bcb86dd"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"serviceOffer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"service-offer/92fee6cb-86c2-4fff-be5e-c87e6b27cf37"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"connector"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"exoscale-ch-gva"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"resource:ram"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resource:vcpu"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resource:disk"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resource:instanceType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Micro"</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="s2">"whetstone:score"</span><span class="p">:</span><span class="w"> </span><span class="mf">3997.3</span><span class="p">,</span><span class="w">
  </span><span class="s2">"whetstone:units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MWIPS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"whetstone:freetext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Executed by a Nuvla App"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"dhrystone:score"</span><span class="p">:</span><span class="w"> </span><span class="mf">33322937.2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dhrystone:units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"lps"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dhrystone:freetext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Executed by a Nuvla App"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">},</span><span class="w">
  </span><span class="s2">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"..."</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>Show all of the ServiceBenchmark resources from the
  &ldquo;exoscale-ch-gva&rdquo;.  With an average over the Whetstone score.</p>
</blockquote>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/service-benchmark?$filter=serviceOffer/connector/href="exoscale-ch-gva"&amp;$aggregation=avg:whetstone:score'</span>
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"service-benchmark"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/ServiceBenchmarkCollection"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"aggregations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"avg:whetstone:score"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">4061.52400390625</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">

  </span><span class="s2">"serviceBenchmarks"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s2">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The ServiceBenchmark resource allows performance and other service
metrics to be posted about one or more Service Offers.  Such
information can be used to make informed decisions about which cloud
resources to provision for a particular application. </p>

<p>Like for the ServiceOffer, the schema is open, allowing publication of
any benchmarks.  The only requirement is that these attributes must be
namespaced.  The namespaces <strong>must</strong> be defined in a
ServiceAttributeNamespace resources and the attribute itself <strong>may</strong>
be described in a ServiceAttribute resource.</p>

<h2 id="service-attribute-(cimi)">Service Attribute (CIMI)</h2>

<blockquote>
<p>Show all of the ServiceAttribute resources.</p>
</blockquote>
<pre><code class="highlight shell">curl https://nuv.la/api/service-attribute
</code></pre>

<p>A ServiceAttribute resource provides semantic information concerning
an attribute that appears in ServiceOffer resources.  This resource is
intended to provide information that helps humans understand the
information provided in a ServiceOffer resource.  The resource&rsquo;s
parameters are described in the table below.</p>

<p>Currently, only an administrator can create, update, or delete
ServiceAttribute resources. These actions follow the standard CIMI
patterns.  Most users will only search these resources and look at the
details for a particular ServiceAttribute resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>true</td>
<td>short human-readable tag</td>
</tr>
<tr>
<td>description</td>
<td>true</td>
<td>longer human-readable description</td>
</tr>
<tr>
<td>prefix</td>
<td>true</td>
<td>namespace prefix</td>
</tr>
<tr>
<td>attributeName</td>
<td>true</td>
<td>name of the attribute itself</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>type of the attribute&rsquo;s value</td>
</tr>
</tbody></table>

<h2 id="service-attribute-namespace-(cimi)">Service Attribute Namespace (CIMI)</h2>

<blockquote>
<p>Search for all of the ServiceAttributeNamespace resources.</p>
</blockquote>
<pre><code class="highlight shell">curl https://nuv.la/api/service-attribute-namespace
</code></pre>

<blockquote>
<p>Show the ServiceAttributeNamespace resource for the &ldquo;exoscale&rdquo;
  prefix. </p>
</blockquote>
<pre><code class="highlight shell">curl https://nuv.la/api/service-attribute-namespace/exoscale
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"service-attribute-namespace/exoscale"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/ServiceAttributeNamespace"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-27T08:41:39.470Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-27T08:41:39.470Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"prefix"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"exoscale"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uri"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/schema/1/connector/exoscale"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"..."</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"..."</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Every attribute in a ServiceOffer resource must be namespaced to avoid
collisions.  The ServiceAttributeNamespace resources maintain the
mapping between a namespace prefix and the associated, complete
URI. The parameters are described in the table below.</p>

<p>A ServiceOffer resource cannot be uploaded to the server unless all of
the namespace prefixes within the document have been defined.</p>

<p>Currently, only an administrator can create, update, or delete
ServiceAttributeNamespace resources. These actions follow the standard
CIMI patterns.  Most users will only search these resources and look
at the details for a particular ServiceAttributeNamespace resource.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>prefix</td>
<td>true</td>
<td>namespace prefix</td>
</tr>
<tr>
<td>uri</td>
<td>true</td>
<td>full URI associated with the prefix</td>
</tr>
</tbody></table>

<h1 id="monitoring">Monitoring</h1>

<h2 id="virtualmachine-(cimi)">VirtualMachine (CIMI)</h2>

<p>These resources provide information for all active virtual machines on
the underlying cloud infrastructures. Together they constitute the
current global state of compute resources managed by SlipStream.</p>

<p>You must be authenticated with the SlipStream server to access the
VirtualMachine collection and resources.</p>

<aside class="warning">

SlipStream handles the lifecycle of these resources, creating,
updating, and deleting them as it monitors the associated virtual
machines.  Users typically are only interested in viewing and querying
these resources.

</aside>

<h3 id="list-virtual-machines">List Virtual Machines</h3>
<pre><code class="highlight shell">curl https://nuv.la/api/virtual-machine -b ~/cookies -D -
</code></pre>
<pre><code class="highlight http"><span class="err">HTTP/2 200
server: nginx
date: Wed, 17 Oct 2018 08:36:24 GMT
content-type: application/json
content-length: 3254718
vary: Accept-Encoding
strict-transport-security: max-age=31536000
</span></code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/VirtualMachineCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"virtual-machine"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">870</span><span class="p">,</span><span class="w">

  </span><span class="err">...</span><span class="w">

  </span><span class="s2">"virtualMachines"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"connector"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"connector/exoscale-de-fra"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ip"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"194.182.170.118"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credentials"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"credential/7353af45-cd25-4bb0-9444-ee1935aa8a81"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-17T08:28:59.345Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billable"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-15T13:54:48.539Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"running"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"instanceID"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"0781484e-c82a-4522-b339-386e12c9e8ce"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"virtual-machine/a5d482e1-1fc0-33b7-b3b0-78fc4a5d08b2"</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w">    
    </span><span class="err">}</span><span class="p">]</span><span class="w">
    </span><span class="err">...</span><span class="w">
</span></code></pre>

<p>Listing the VirtualMachine resources follows the standard CIMI
pattern, using an HTTP GET request on the collection URL. </p>

<p>The example command returns the HTTP headers of the request and then
the full list of Virtual Machine resources as a JSON document. The
returned JSON document contains some general information concerning,
for example, the total number of documents (&ldquo;count&rdquo; key), followed by
the list of VirtualMachine resource under the &ldquo;virtualMachines&rdquo; key.</p>

<h3 id="filtering-virtual-machines">Filtering Virtual Machines</h3>

<p>The full <a href="#resource-selection">CIMI filtering syntax</a> (with SlipStream
extensions) can be used to find a subset of the VirtualMachine
resources. For example, the filter terms:</p>

<ul>
<li><code class="prettyprint">connector/href=&quot;connector/exoscale-de-fra&quot;</code></li>
<li><code class="prettyprint">state=&quot;running&quot;</code></li>
</ul>

<p>would limit the response to only virtual machines in a running state
on the &ldquo;exoscale-de-fra&rdquo; cloud.  Other query parameters, can also be
used, for example <code class="prettyprint">$last=0</code> to just return the global count
information.</p>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/virtual-machine?$filter=connector/href="connector/exoscale-de-fra"%20and%20state="running"&amp;$last=0'</span> -b ~/cookies -D -
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">351</span><span class="p">,</span><span class="w">
  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MODIFY"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/VirtualMachineCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"virtual-machine"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"virtual-machine"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"virtualMachines"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="storagebucket-(cimi)">StorageBucket (CIMI)</h2>

<p>These resources provide information for S3 buckets accessible via the
cloud credentials stored in SlipStream. Together they provide a global
snapshot of S3 object storage on the cloud infrastructures accessible
through SlipStream.</p>

<p>You must be authenticated with the SlipStream server to access the
StorageBucket collection and resources.</p>

<aside class="warning">

SlipStream handles the lifecycle of these resources, creating,
updating, and deleting them as it monitors the associated S3 storage.
Users typically are only interested in viewing and querying these
resources.

</aside>

<h3 id="list-and-filter-storage-buckets">List and Filter Storage Buckets</h3>

<p>Listing and filtering the StorageBucket resources follows the standard
CIMI patterns.  The full CIMI filtering syntax is available when
listing the StorageBucket resources.</p>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/storage-bucket?$last=1'</span> -b ~/cookies -D -
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">638</span><span class="p">,</span><span class="w">
  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MODIFY"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/StorageBucketCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-bucket"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-bucket"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"storageBuckets"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"connector"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"connector/exoscale-ch-gva"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"obj store usage for bucket slipstream-test-1533528220, from credential credential/df3e1df6-37e5-4bf2-9366-7f0d5ae072a8 in connector/exoscale-ch-gva"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"credentials"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"credential/df3e1df6-37e5-4bf2-9366-7f0d5ae072a8"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-22T19:06:51.545Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"bucket slipstream-test-1533528220 size in connector/exoscale-ch-gva"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-22T15:09:25.951Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"usageInKiB"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">51</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-bucket/a048beb7-2dc2-3899-92fc-2f6abeadd1f5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"SixSq:/admin"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ALL"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"RHEA:/admin"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
      </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
      </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"edit"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-bucket/a048beb7-2dc2-3899-92fc-2f6abeadd1f5"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"delete"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"storage-bucket/a048beb7-2dc2-3899-92fc-2f6abeadd1f5"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"bucketName"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"slipstream-test-1533528220"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/StorageBucket"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"serviceOffer"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"resource:host"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"sos.exo.io"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"service-offer/08b86233-0ef2-4716-a58d-901816738955"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price:unitCost"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">2.0E-5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource:storage"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource:type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"DATA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resource:platform"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"S3"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price:billingUnit"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"GiBh"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price:currency"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h2 id="quota-(cimi)">Quota (CIMI)</h2>

<p>The collection of Quota resources defines the overall resource
utilization policy for the SlipStream server.  Each Quota resource
defines a limit on an identified resource.  For new resource requests,
SlipStream will verify that the request will not exceed the defined
quotas before executing the request.  Currently, SlipStream only
checks quotas when deploying new workloads.</p>

<p>The Quota resource follows the standard CIMI SCRUD patterns. It is
<strong>not</strong> a templated resource and uses the simple CIMI add pattern.</p>

<aside class="notice">

Because quotas can potentially impact a large number of users, only
administrators can create Quota resources.

</aside>

<h3 id="quota-attributes">Quota Attributes</h3>

<blockquote>
<p>An abbreviated example of a Quota resource that sets a limit (116)
  on the total number (count:id) of VirtualMachine resources for the
  given credential for the MYORG organization. </p>
</blockquote>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota/a6d547cd-3855-4b24-aae2-73ad0707d828"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Quota"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"max_instances in connector/exoscale-ch-dk"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"limits regarding max_instances, for credential credential/45765716-33f0-46bb-b3de-7bef04a58998 in connector/exoscale-ch-dk"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-18T05:17:21.162Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-06T05:30:03.214Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VirtualMachine"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"selection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credentials/href='credential/45765716-33f0-46bb-b3de-7bef04a58998'"</span><span class="w">
  </span><span class="s2">"aggregation"</span><span class="err">:</span><span class="w"> </span><span class="s2">"count:id"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">116</span><span class="p">,</span><span class="w">

  </span><span class="s2">"acl"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rules"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"right"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"principal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MYORG:can_deploy"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"operations"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/action/collect"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quota/a6d547cd-3855-4b24-aae2-73ad0707d828/collect"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th style="text-align: left">Attribute&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code class="prettyprint">resource</code></td>
<td style="text-align: left">Identifies the resource to which the quota applies. Current examples include &ldquo;VirtualMachine&rdquo; and &ldquo;NuvlaBoxRecord&rdquo;, the source of the current debate.</td>
</tr>
<tr>
<td style="text-align: left"><code class="prettyprint">selection</code></td>
<td style="text-align: left">A CIMI filter expression that identifies the resources to include in the calculation of the current resource utilization.</td>
</tr>
<tr>
<td style="text-align: left"><code class="prettyprint">aggregation</code></td>
<td style="text-align: left">A CIMI aggregation expression that calculates the values for the current resource utilization. One number is calculated with the access rights of the user and another, with the access rights of &ldquo;super&rdquo;.</td>
</tr>
<tr>
<td style="text-align: left"><code class="prettyprint">limit</code></td>
<td style="text-align: left">The value to compare the calculated resource utilization against.</td>
</tr>
<tr>
<td style="text-align: left"><code class="prettyprint">acl</code></td>
<td style="text-align: left">Defines to whom a given quota resource applies. If a quota resource is visible to an entity (user, group, role, etc.), it applies to that entity.</td>
</tr>
</tbody></table>

<h3 id="collect-action">Collect Action</h3>

<p>The &ldquo;collect&rdquo; action (shown in the operations section) can be executed
by sending an HTTP POST request to the given URL.</p>

<p>This action will calculate the Quota&rsquo;s aggregation by running the
defined selection filter against the specified resource collection.
This will be done twice: once as the user and once with as the
administrator.</p>

<p>The Quota resource will be returned with two attributes added:
<code class="prettyprint">current</code> and <code class="prettyprint">currentAll</code>.  These are described below.</p>

<table><thead>
<tr>
<th style="text-align: left"></th>
<th style="text-align: left"></th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code class="prettyprint">current</code></td>
<td style="text-align: left">Aggregation result when run as the user.</td>
</tr>
<tr>
<td style="text-align: left"><code class="prettyprint">currentAll</code></td>
<td style="text-align: left">Aggregation result when run as the administrator.</td>
</tr>
</tbody></table>

<p>The enforcement algorithm for the resource will then accept or reject
a request by comparing the <code class="prettyprint">current</code> or <code class="prettyprint">currentAll</code> values to the
defined <code class="prettyprint">limit</code>.  How the comparison is done and how multiple
quotas are combined are defined by the enforcement algorithm itself.</p>

<h2 id="metering-(cimi)">Metering (CIMI)</h2>

<p>The Metering resources are snapshots of the monitoring information
(VirtualMachine and StorageBucket resources) that are taken every
minute to provide historical usage information.  These resources can
be queried to provide aggregate usage information for a given time
period, specific groups or users, etc.</p>

<aside class="warning">

SlipStream handles the lifecycle of these resources, creating them
with each periodic snapshot. Users typically are only interested in
viewing, querying, and aggregating values for these resources.

</aside>

<h3 id="filtering-and-aggregation">Filtering and Aggregation</h3>

<blockquote>
<p>Provide the average number of CPU cores and total cost for the
  &ldquo;user/test&rdquo; user for the given time period.</p>
</blockquote>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/metering?$last=0&amp;deployment/user!='</span>user/test<span class="s1">'&amp;$aggregation=sum:price,avg:serviceOffer/resource:vpu&amp;$filter=created&lt;"now"%20and%20created&gt;"2018-09-13T00:00:00Z"%20and%20deployment/user/href="user/test"'</span> <span class="se">\</span>
    -b ~/cookies -D -
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">45083692</span><span class="p">,</span><span class="w">
  </span><span class="s2">"aggregations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"avg:serviceOffer/resource:vcpu"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">6.730052249501845</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"sum:price"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"value"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mf">187186.03962752942</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"MODIFY"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"VIEW"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/MeteringCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"metering"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"add"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"metering"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"meterings"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Typically you will query these resources by providing a time window, a
user/group, and the value(s) to aggregate.  To filter by the date and
user, a <code class="prettyprint">$filter</code> expression similar to the following can be used:</p>

<p><code class="prettyprint">created&lt;&quot;now-1d&quot; and created&gt;&quot;2018-09-13T00:00:00Z&quot;</code></p>

<p>Explicit dates can be used or relative times compared to &ldquo;now&rdquo;.  The
support for &ldquo;now&rdquo; expressions is an extension to the CIMI
standard. The &ldquo;now&rdquo; expression syntax comes directly from the
underlying Elasticsearch database.</p>

<p>You will almost never be interested in the individual metering
resources.  <strong>As there are an extremely large number in any time
window, the list can be suppressed by providing the query parameter
<code class="prettyprint">$last=0</code>.</strong> With the general information and any aggregation
information will be returned, but none of the selected resources.</p>

<p>You can review the <a href="#resource-selection">aggregation documentation</a> to
see what aggregations are supported.  In the context of accounting,
the &ldquo;count&rdquo;, &ldquo;avg&rdquo;, and &ldquo;sum&rdquo; aggregations are usually the most
useful.  To sum the money spent on the resources (assuming that prices
have been defined for the cloud), you can use a query expression like
the following:</p>

<p><code class="prettyprint">$aggregation=sum:price</code></p>

<p>to calculate the total cost of the selected resources.  Multiple
aggregations can be specified either as a multiple parameters or as a
comma-separated value.  The requested information will be returned in
the &ldquo;aggregations&rdquo; key of the response.</p>

<p>The example shows a full example and the JSON response.</p>

<h1 id="user">User</h1>

<h2 id="user-(cimi)">User (CIMI)</h2>

<p>User resources contain personal information and a few parameters
concerning the registered users.  This is a templated resource, so
creating a new user requires a template.  All the SCRUD
actions follow the standard CIMI patterns. </p>

<h2 id="usertemplate-(cimi)">UserTemplate (CIMI)</h2>

<blockquote>
<p>Listing of the available UserTemplate resources on Nuvla.</p>
</blockquote>
<pre><code class="highlight shell">curl <span class="s1">'https://nuv.la/api/user-template?$select=name,description'</span>
</code></pre>
<pre><code class="highlight json"><span class="p">{</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/UserTemplateCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"user-template"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userTemplates"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ESRF Realm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Creates a new user through OIDC registration"</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w">
    </span><span class="err">}</span><span class="p">,</span><span class="w">
    </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/UserTemplate"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"operations"</span><span class="w"> </span><span class="err">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/action/describe"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"/describe"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="err">}</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"INFN Realm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Creates a new user through OIDC registration"</span><span class="p">,</span><span class="w">
    </span><span class="err">...</span><span class="w">

</span></code></pre>

<p>UserTemplate resources define the &ldquo;user registration&rdquo; methods that are
permitted by the server.  The UserTemplate collection follows all of
the CIMI SCRUD patterns. </p>

<p>The server will always contain the &ldquo;direct&rdquo; user template.  This
template is only acceptable to administrators and allows the direct
creation of a new user without any email verification, etc.</p>

<p>The system administrator may create additional templates to allow
other user registration methods.  If the ACL of the template allows
for &ldquo;anonymous&rdquo; access, then the server will support self-registration
of users.  The registration processes will typically require
additional validation step, such as email verification.</p>

<h2 id="userparam-(cimi)">UserParam (CIMI)</h2>

<p>The UserParam resource contains default values for a number of
user-level parameters.  These include things like the default
deployment timeout, verbosity, and the default cloud service.</p>

<p>This is a templated resource that follows all the standard CIMI SCRUD
patterns. Normally, these resources are created during the user
registration process and not created manually.</p>

<p>A UserParam resource can be matched to the User resource via a
<code class="prettyprint">$filter</code> like the following:</p>

<p><code class="prettyprint">acl/owner/principal=&#39;83c39a85-1d03-4931-9c82-c015e0452359&#39;</code></p>

<p>where the value is the <code class="prettyprint">id</code> of the User resource without the &ldquo;user/&rdquo;
prefix. </p>

<h2 id="userparamtemplate-(cimi)">UserParamTemplate (CIMI)</h2>

<p>The UserParamTemplate resources allow UserParam resources to be
created.  Normally, users and administrators will never create a
UserParam resource manually and will not need to use these templates.</p>

<h2 id="useridentifier-(cimi)">UserIdentifier (CIMI)</h2>

<p>The UserIdentifier resources provide a mapping between an external
identity (for a given authentication method) and a registered user.
Multiple external identities can be mapped to the same SlipStream
user, allowing that user to authenticate in different ways while using
the same account.</p>

<p>This resource follows the standard CIMI SCRUD patterns.  However, the
resource <code class="prettyprint">id</code> is a hashed value of the <code class="prettyprint">identifier</code>.  This guarantees
that a single external identifier cannot be mapped to more than one
user.</p>

<p>Users will normally not be concerned with these resources, although
they can list them to see what authentication methods are mapped to
their accounts.</p>

<p>Administrators may create new UserIdentifier resources to allow a user
to have more than one authentication method.</p>

<aside class="warning">

Because the resource identifier and the resource id are linked, you
cannot &ldquo;edit&rdquo; the `identifier` field of a UserIdentifier resource;
doing so will invalidate resource.  If you want to change an external
identifier, you must delete the old one and create a new one.

</aside>

<h1 id="applications">Applications</h1>

<h2 id="module-(legacy)">Module (Legacy)</h2>

<p>(Extracted from the <a href="http://ssdocs.sixsq.com/documentation/advanced_tutorial/key_concepts.html">tutorial
documentation</a>)</p>

<p>Metadata about your images and deployments are organized into projects
in SlipStream. Each project consists of a number of modules. The
modules may be Project, Machine Image or Deployment modules:</p>

<ul>
<li><p><em>Project</em>: A container of modules used to provide logical
 grouping. A project may contain other projects allowing a
 hierarchical organization for large projects.</p></li>
<li><p><em>Machine image</em>: A module that contains information about a
 virtual machine image. One type of machine image is a native
 image. These contain a cloud-specific identifier for a particular
 cloud infrastructure. The other type of machine image, a derived
 image, references another image (which can be a native image or
 another derived image) and includes a list of packages to install
 and/or recipes to configure the machine. These modules also
 include input/output parameters such that the machine can be
 synchronized as part of a deployment.</p></li>
<li><p><em>Deployment</em>: A module that describes a coordinated deployment of
 one or more nodes. The deployment associates a machine image to
 each node and defines the synchronizaton necessary for the
 coordinated deployment.</p></li>
</ul>

<p>These items are normalised into <em>module</em> resources in the REST API.</p>

<aside class="notice">

Remember, image, deployment and project are type attributes of the
module resource.

</aside>

<h3 id="get-a-module">Get a module</h3>
<pre><code class="highlight shell">curl https://nuv.la/module/&lt;module&gt; --user &lt;user&gt;:&lt;password&gt; -H <span class="s2">"Content-Type: application/xml"</span>
</code></pre>

<blockquote>
<p>The above command returns a response body structured like this:</p>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;imageModule</span> <span class="na">category=</span><span class="s">"Image"</span> <span class="na">creation=</span><span class="s">"2013-12-02 17:00:37.421 UTC"</span> <span class="na">deleted=</span><span class="s">"false"</span> <span class="na">description=</span><span class="s">"Minimal installation of the Ubuntu 12.04 (LTS) operating system."</span> <span class="na">imageId=</span><span class="s">"8c7e60ae-3a30-4031-a3e6-29832d85d7cb"</span> <span class="na">isBase=</span><span class="s">"true"</span> <span class="na">isLatestVersion=</span><span class="s">"true"</span> <span class="na">lastModified=</span><span class="s">"2014-05-04 12:36:06.105 UTC"</span> <span class="na">loginUser=</span><span class="s">"ubuntu"</span> <span class="na">logoLink=</span><span class="s">"http://design.ubuntu.com/wp-content/uploads/ubuntu-logo14.png"</span> <span class="na">parentUri=</span><span class="s">"module/examples/images"</span> <span class="na">platform=</span><span class="s">"ubuntu"</span> <span class="na">shortName=</span><span class="s">"ubuntu-12.04"</span> <span class="na">version=</span><span class="s">"480"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;parameters&gt;</span>
        <span class="nt">&lt;entry&gt;</span>
            <span class="nt">&lt;string&gt;</span>extra.disk.volatile<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"Cloud"</span> <span class="na">description=</span><span class="s">"Volatile extra disk in GB"</span> <span class="na">isSet=</span><span class="s">"false"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"extra.disk.volatile"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;/entry&gt;</span>
        <span class="nt">&lt;entry&gt;</span>
            <span class="nt">&lt;string&gt;</span>exoscale-ch-gva.instance.type<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">description=</span><span class="s">"Instance type (flavor)"</span> <span class="na">isSet=</span><span class="s">"true"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"exoscale-ch-gva.instance.type"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>Small<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;defaultValue&gt;</span>Small<span class="nt">&lt;/defaultValue&gt;</span>
            <span class="nt">&lt;/parameter&gt;</span>
        <span class="nt">&lt;/entry&gt;</span>
...
        <span class="nt">&lt;entry&gt;</span>
            <span class="nt">&lt;string&gt;</span>ec2-eu-west.security.group<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;parameter</span> <span class="na">category=</span><span class="s">"ec2-eu-west"</span> <span class="na">description=</span><span class="s">"Security groups (comma separated list)"</span> <span class="na">isSet=</span><span class="s">"true"</span> <span class="na">mandatory=</span><span class="s">"true"</span> <span class="na">name=</span><span class="s">"ec2-eu-west.security.group"</span> <span class="na">order=</span><span class="s">"0"</span> <span class="na">order_=</span><span class="s">"0"</span> <span class="na">readonly=</span><span class="s">"false"</span> <span class="na">type=</span><span class="s">"String"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value&gt;</span>default<span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;defaultValue&gt;</span>default<span class="nt">&lt;/defaultValue&gt;</span>
            <span class="nt">&lt;/parameter&gt;</span>
        <span class="nt">&lt;/entry&gt;</span>
    <span class="nt">&lt;/parameters&gt;</span>
    <span class="nt">&lt;authz</span> <span class="na">groupCreateChildren=</span><span class="s">"false"</span> <span class="na">groupDelete=</span><span class="s">"false"</span> <span class="na">groupGet=</span><span class="s">"true"</span> <span class="na">groupPost=</span><span class="s">"true"</span> <span class="na">groupPut=</span><span class="s">"false"</span> <span class="na">inheritedGroupMembers=</span><span class="s">"true"</span> <span class="na">owner=</span><span class="s">"sixsq"</span> <span class="na">ownerCreateChildren=</span><span class="s">"true"</span> <span class="na">ownerDelete=</span><span class="s">"true"</span> <span class="na">ownerGet=</span><span class="s">"true"</span> <span class="na">ownerPost=</span><span class="s">"true"</span> <span class="na">ownerPut=</span><span class="s">"true"</span> <span class="na">publicCreateChildren=</span><span class="s">"false"</span> <span class="na">publicDelete=</span><span class="s">"false"</span> <span class="na">publicGet=</span><span class="s">"true"</span> <span class="na">publicPost=</span><span class="s">"true"</span> <span class="na">publicPut=</span><span class="s">"false"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;groupMembers</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/authz&gt;</span>
    <span class="nt">&lt;commit</span> <span class="na">author=</span><span class="s">"sixsq"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;published</span> <span class="na">publicationDate=</span><span class="s">"2014-05-04 12:36:06.105 UTC"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;cloudNames</span> <span class="na">length=</span><span class="s">"3"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;string&gt;</span>exoscale-ch-gva<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>ec2-eu-west<span class="nt">&lt;/string&gt;</span>
        <span class="nt">&lt;string&gt;</span>default<span class="nt">&lt;/string&gt;</span>
    <span class="nt">&lt;/cloudNames&gt;</span>
    <span class="nt">&lt;runs/&gt;</span>
    <span class="nt">&lt;targets</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;packages</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;prerecipe/&gt;</span>
    <span class="nt">&lt;recipe/&gt;</span>
    <span class="nt">&lt;cloudImageIdentifiers&gt;</span>
        <span class="nt">&lt;cloudImageIdentifier</span> <span class="na">cloudImageIdentifier=</span><span class="s">"ami-a0dd3dd7"</span> <span class="na">cloudServiceName=</span><span class="s">"ec2-eu-west"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;cloudImageIdentifier</span> <span class="na">cloudImageIdentifier=</span><span class="s">"8c7e60ae-3a30-4031-a3e6-29832d85d7cb"</span> <span class="na">cloudServiceName=</span><span class="s">"exoscale-ch-gva"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/cloudImageIdentifiers&gt;</span>
<span class="nt">&lt;/imageModule&gt;</span>
</code></pre>
<pre><code class="highlight shell">curl https://nuv.la/module/examples/foo -H <span class="s2">"Content-Type: application/xml"</span> --user &lt;user&gt;:&lt;password&gt; &gt; foo.xml
</code></pre>

<p>Get a module (i.e. image, deployment or project).</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/module/&lt;module&gt;[/&lt;version&gt;]</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>module</td>
<td>true</td>
<td>Unique identifier of the module - e.g. <em>examples/images/ubuntu-12.04</em>.</td>
</tr>
<tr>
<td>version</td>
<td>false</td>
<td>Version of the module to update. If not provided, get the latest (most recent)</td>
</tr>
</tbody></table>

<aside class="notice">
To list the root projects, simply omit the <em>&lt;MODULE></em> from the request.
</aside>

<h3 id="update-a-module">Update a module</h3>
<pre><code class="highlight shell">curl https://nuv.la/module/&lt;module&gt; --user &lt;user&gt;:&lt;password&gt; --data @&lt;file&gt; -X PUT -H <span class="s2">"Content-Type: application/xml"</span>
</code></pre>

<blockquote>
<p>where &lt;file&gt; is an xml file - e.g. the result of a previous GET on the same resource</p>

<p>The above command returns a header structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Mon, 12 May 2014 15:16:49 GMT</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://nuv.la/module/examples/foo/1199</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.1m4</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1399951006191&amp;com.sixsq.signature=-cotcj9t5rzu3zx2uof96x8scptxh5mbraazmf63doem22tkvlq1519twaz7uxlvtyyxd0fxvygvrsn1hip09yvn7v11c9a74j21; Path=/</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">0</span>
</code></pre>

<blockquote>
<p>To see the header, add <em>-D -</em> (with the trailing dash) to the curl command</p>
</blockquote>

<p>Update a module (i.e. image, deployment or project).</p>

<p>The PUT request will create a new resource with the same &lt;module&gt; name but a higher &lt;version&gt;. The response includes the new fully qualified resource.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://nuv.la/module/&lt;module&gt;[/&lt;version&gt;]</code></p>

<p>The <strong>Location</strong> attribute in the response header provides the full url of the updated resource, with the incremented version.</p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>module</td>
<td>true</td>
<td>Unique identifier of the module - e.g. <em>examples/images/ubuntu-12.04</em>. If not provided, list the root modules.</td>
</tr>
<tr>
<td>version</td>
<td>false</td>
<td>Version of the module. If not provided, get the latest (most recent)</td>
</tr>
</tbody></table>

<aside class="warning">

This PUT request is not idem potent - i.e. calling it several times
will create new resources.

</aside>

<h3 id="delete-a-module">Delete a module</h3>
<pre><code class="highlight shell">curl https://nuv.la/module/&lt;module&gt; -u &lt;user&gt;:&lt;password&gt; -X DELETE -D -
</code></pre>

<blockquote>
<p>The above command returns a header structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Tue, 13 May 2014 03:08:15 GMT</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://nuv.la/module/examples/toto/11</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.1m4</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1399993694970&amp;com.sixsq.signature=izoalqmos489wxw8z25k03nqtsdfyxyv2ak5adi1e0h73zdziq45y1eat66tcob5ybvh7oe5gbh8es1onj4f6orj2enrqu9w9j0; Path=/</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">0</span>
</code></pre>

<p>Delete a module (i.e. image, deployment or project).</p>

<p>The DELETE request will delete the specified resource if fully qualified (i.e. including the &lt;VERSION&gt;) or the latest version otherwise.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://nuv.la/module/&lt;module&gt;[/&lt;version&gt;]</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>module</td>
<td>true</td>
<td>Unique identifier of the module - e.g. <em>examples/images/ubuntu-12.04</em>.</td>
</tr>
<tr>
<td>version</td>
<td>false</td>
<td>Version of the module. If not provided, delete the latest (most recent)</td>
</tr>
</tbody></table>

<h3 id="delete-all-versions-of-a-module">Delete all versions of a module</h3>
<pre><code class="highlight shell">curl https://nuv.la/module/&lt;module&gt;/ -u &lt;user&gt;:&lt;password&gt; -X DELETE -D -
</code></pre>

<blockquote>
<p>The above command returns a header structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Tue, 13 May 2014 03:08:15 GMT</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://nuv.la/module/examples/toto/11</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.1m4</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1399993694970&amp;com.sixsq.signature=izoalqmos489wxw8z25k03nqtsdfyxyv2ak5adi1e0h73zdziq45y1eat66tcob5ybvh7oe5gbh8es1onj4f6orj2enrqu9w9j0; Path=/</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">0</span>
</code></pre>

<p>Delete all versions of a module (i.e. image, deployment or project) for which the authenticated user has the &ldquo;delete&rdquo; right.</p>

<p>The DELETE request will delete all versions of the specified resource.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://nuv.la/module/&lt;module&gt;/</code></p>

<aside class="notice">
Notice the trailing &rsquo;/&rsquo; in the URL
</aside>

<aside class="notice">
This call doesn&rsquo;t fails if the authenticated user doesn&rsquo;t have the right to delete some or all versions of the module.
</aside>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>module</td>
<td>true</td>
<td>Unique identifier of the module with the trailing slash - e.g. <em>examples/images/ubuntu-12.04/</em>.</td>
</tr>
</tbody></table>

<h3 id="module-history-(versions)">Module history (versions)</h3>
<pre><code class="highlight shell">curl https://nuv.la/module/&lt;module&gt;/ -u &lt;user&gt;:&lt;password&gt;
</code></pre>
<pre><code class="highlight xml"><span class="nt">&lt;versionList&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"module/examples/an-image/12"</span> <span class="na">lastModified=</span><span class="s">"2014-05-13 04:53:47.339 CEST"</span> <span class="na">version=</span><span class="s">"12"</span> <span class="na">category=</span><span class="s">"Image"</span> <span class="na">name=</span><span class="s">"an-image"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authz</span> <span class="na">owner=</span><span class="s">"test"</span> <span class="na">ownerGet=</span><span class="s">"true"</span> <span class="na">ownerPut=</span><span class="s">"true"</span> <span class="na">ownerPost=</span><span class="s">"true"</span> <span class="na">ownerDelete=</span><span class="s">"true"</span> <span class="na">ownerCreateChildren=</span><span class="s">"true"</span> <span class="na">groupGet=</span><span class="s">"false"</span> <span class="na">groupPut=</span><span class="s">"false"</span> <span class="na">groupPost=</span><span class="s">"false"</span> <span class="na">groupDelete=</span><span class="s">"false"</span> <span class="na">groupCreateChildren=</span><span class="s">"false"</span> <span class="na">publicGet=</span><span class="s">"false"</span> <span class="na">publicPut=</span><span class="s">"false"</span> <span class="na">publicPost=</span><span class="s">"false"</span> <span class="na">publicDelete=</span><span class="s">"false"</span> <span class="na">publicCreateChildren=</span><span class="s">"false"</span> <span class="na">inheritedGroupMembers=</span><span class="s">"true"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;groupMembers</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/authz&gt;</span>
      <span class="nt">&lt;commit</span> <span class="na">author=</span><span class="s">"test"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;comment&gt;&lt;/comment&gt;</span>
      <span class="nt">&lt;/commit&gt;</span>
   <span class="nt">&lt;/item&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"module/examples/an-image/2"</span> <span class="na">lastModified=</span><span class="s">"2014-05-12 14:33:53.39 CEST"</span> <span class="na">version=</span><span class="s">"2"</span> <span class="na">category=</span><span class="s">"Image"</span> <span class="na">name=</span><span class="s">"an-image"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;authz</span> <span class="na">owner=</span><span class="s">"test"</span> <span class="na">ownerGet=</span><span class="s">"true"</span> <span class="na">ownerPut=</span><span class="s">"true"</span> <span class="na">ownerPost=</span><span class="s">"true"</span> <span class="na">ownerDelete=</span><span class="s">"true"</span> <span class="na">ownerCreateChildren=</span><span class="s">"true"</span> <span class="na">groupGet=</span><span class="s">"false"</span> <span class="na">groupPut=</span><span class="s">"false"</span> <span class="na">groupPost=</span><span class="s">"false"</span> <span class="na">groupDelete=</span><span class="s">"false"</span> <span class="na">groupCreateChildren=</span><span class="s">"false"</span> <span class="na">publicGet=</span><span class="s">"false"</span> <span class="na">publicPut=</span><span class="s">"false"</span> <span class="na">publicPost=</span><span class="s">"false"</span> <span class="na">publicDelete=</span><span class="s">"false"</span> <span class="na">publicCreateChildren=</span><span class="s">"false"</span> <span class="na">inheritedGroupMembers=</span><span class="s">"true"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;groupMembers</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/authz&gt;</span>
      <span class="nt">&lt;commit</span> <span class="na">author=</span><span class="s">"test"</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/versionList&gt;</span>
</code></pre>

<p>List all the history (i.e. all the versions) of the module. Since each PUT creates a new version
of the module, this request allows users to list these.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/module/&lt;module&gt;/</code></p>

<aside class="notice">
Notice the trailing &rsquo;/&rsquo; in the URL
</aside>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>module</td>
<td>true</td>
<td>Unique identifier of the module with the trailing slash - e.g. <em>examples/images/ubuntu-12.04</em>.</td>
</tr>
</tbody></table>

<h2 id="module-(cimi)">Module (CIMI)</h2>

<p>This is a prototype resource that will eventually replace the legacy
module resource.  This resource should not be used in production. </p>

<h2 id="moduleapplication-(cimi)">ModuleApplication (CIMI)</h2>

<p>This is a prototype resource that supports the new CIMI Module
resource.  This resource would be accessed only through the CIMI
Module resource and not used directly.  This should not be used in
production at this time. </p>

<h2 id="modulecomponent-(cimi)">ModuleComponent (CIMI)</h2>

<p>This is a prototype resource that supports the new CIMI Module
resource.  This resource would be accessed only through the CIMI
Module resource and not used directly.  This should not be used in
production at this time. </p>

<h2 id="moduleproject-(cimi)">ModuleProject (CIMI)</h2>

<p>This is a prototype resource that supports the new CIMI Module
resource.  This resource would be accessed only through the CIMI
Module resource and not used directly.  This should not be used in
production at this time. </p>

<h1 id="deployment">Deployment</h1>

<h2 id="run-(legacy)">Run (Legacy)</h2>

<p>The <em>run</em> resource represents an execution in the cloud - i.e. running VMs.
SlipStream supports 3 types of runs:</p>

<ul>
<li>Simple run: result of running an image</li>
<li>Deployment: result of running a deployment</li>
<li>Build image: result of creating a new image from an image template (or blueprint)</li>
</ul>

<p>The run resource therefore represents one or several VMs, running or not depending
on the state of the run.</p>

<h3 id="list-all-runs">List all Runs</h3>
<pre><code class="highlight shell">curl https://nuv.la/run -u &lt;user&gt;:&lt;password&gt;
</code></pre>
<pre><code class="highlight xml"><span class="nt">&lt;runs</span> <span class="na">offset=</span><span class="s">"0"</span> <span class="na">limit=</span><span class="s">"20"</span> <span class="na">count=</span><span class="s">"20"</span> <span class="na">totalCount=</span><span class="s">"93"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"run/fed1dd04-aa05-4a92-abb8-ed279f1f4dd4"</span> <span class="na">uuid=</span><span class="s">"fed1dd04-aa05-4a92-abb8-ed279f1f4dd4"</span> <span class="na">moduleResourceUri=</span><span class="s">"module/SlipStream/deploy-slipstream-dpl/745"</span> <span class="na">status=</span><span class="s">"Done"</span> <span class="na">abort=</span><span class="s">""</span> <span class="na">startTime=</span><span class="s">"2015-03-17 13:34:51.440 UTC"</span> <span class="na">cloudServiceNames=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">username=</span><span class="s">"sixsq_dev"</span> <span class="na">type=</span><span class="s">"Orchestration"</span> <span class="na">tags=</span><span class="s">""</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"run/1ab29b6a-f08c-45ae-9cf4-336a0415f46c"</span> <span class="na">uuid=</span><span class="s">"1ab29b6a-f08c-45ae-9cf4-336a0415f46c"</span> <span class="na">moduleResourceUri=</span><span class="s">"module/SlipStream/deploy-slipstream-dpl/742"</span> <span class="na">status=</span><span class="s">"Cancelled"</span> <span class="na">abort=</span><span class="s">"Failed running &amp;apos;execute&amp;apos; target on &amp;apos;slipstream.1&amp;apos;"</span> <span class="na">startTime=</span><span class="s">"2015-03-17 10:52:05.331 UTC"</span> <span class="na">cloudServiceNames=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">username=</span><span class="s">"sixsq_dev"</span> <span class="na">type=</span><span class="s">"Orchestration"</span> <span class="na">tags=</span><span class="s">""</span><span class="nt">/&gt;</span>
   ...
<span class="nt">&lt;/runs&gt;</span>
</code></pre>

<p>List all runs of a user.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/run</code></p>

<h3 id="get-a-run">Get a Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/&lt;run&gt; -u &lt;user&gt;:&lt;password&gt;
</code></pre>
<pre><code class="highlight xml"><span class="nt">&lt;runs&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"run/4f187379-cdb9-470d-9656-b6fac6dc33d8"</span> <span class="na">uuid=</span><span class="s">"4f187379-cdb9-470d-9656-b6fac6dc33d8"</span> <span class="na">moduleResourceUri=</span><span class="s">"module/examples/tutorials/service-testing/system/471"</span> <span class="na">status=</span><span class="s">"Done"</span> <span class="na">startTime=</span><span class="s">"2014-05-10 15:22:56.882 UTC"</span> <span class="na">cloudServiceName=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">username=</span><span class="s">"meb"</span> <span class="na">type=</span><span class="s">"Orchestration"</span> <span class="na">tags=</span><span class="s">""</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;item</span> <span class="na">resourceUri=</span><span class="s">"run/fa3b9652-9dac-49e2-9573-b761777c8238"</span> <span class="na">uuid=</span><span class="s">"fa3b9652-9dac-49e2-9573-b761777c8238"</span> <span class="na">moduleResourceUri=</span><span class="s">"module/examples/tutorials/service-testing/system/471"</span> <span class="na">status=</span><span class="s">"Done"</span> <span class="na">startTime=</span><span class="s">"2014-05-10 15:13:29.352 UTC"</span> <span class="na">cloudServiceName=</span><span class="s">"exoscale-ch-gva"</span> <span class="na">username=</span><span class="s">"meb"</span> <span class="na">type=</span><span class="s">"Orchestration"</span> <span class="na">tags=</span><span class="s">""</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/runs&gt;</span>
</code></pre>

<p>Get a specific run.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/run/&lt;run-uuid&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
</tbody></table>

<h3 id="create-a-run">Create a Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run -d <span class="nv">refqname</span><span class="o">=</span>module/examples/an-image -d <span class="nb">type</span><span class="o">=</span>Run -u &lt;user&gt;:&lt;password&gt; -X POST -H <span class="s2">"Content-Type: text/plain"</span> -D -
</code></pre>

<blockquote>
<p>The above command returns a header structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Tue, 13 May 2014 11:29:56 GMT</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.1m4</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1400023769837&amp;com.sixsq.signature=eck79w5qyslb16ke31vfof2b9o6729mcsjgnsqc143nsgqkuepmkgqnaakv544x7nankz4875p0uyg8unl8d5m4dl60wzr6pcpn; Path=/</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">0</span>
</code></pre>

<p>Create a new standard (non-scalable) run.</p>

<aside class="notice">
Non-scalable runs cannot be changed once deployed. If you require to scale up or down the run, then request a <em>scalable</em> run (see below).
</aside>

<aside class="notice">
This scalable/non-scalable feature only applies to deployment type run (aka <em>Orchestration</em> type).
</aside>

<p>The <strong>Location</strong> attribute in the response header provides the full url of the updated resource, with the incremented version.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://nuv.la/run</code></p>

<h4 id="body-parameters">Body Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refqname</td>
<td>true</td>
<td>Reference module from which to create a run. Must be an <em>Image</em> or <em>Deployment</em> category - e.g. <em>module/SlipStream/deploy-slipstream-dpl</em>.</td>
</tr>
<tr>
<td>type</td>
<td>depends</td>
<td>Type of run. This is only required when running an image, since we can either deploy a VM (i.e. simple run) or create a new image (i.e. build). See below for <em>run type</em> definition.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Run Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Orchestration</td>
<td>Deployment: only applies to deployment category.  This is the only valid type value for deployment, thus does not have to be provided.</td>
</tr>
<tr>
<td>Machine</td>
<td>Build: build a new image on the targeted cloud and set the unique id back in the image definition.</td>
</tr>
<tr>
<td>Run</td>
<td>Simple run: single VM deployment.</td>
</tr>
</tbody></table>

<h3 id="create-a-scalable-run">Create a scalable Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run -d <span class="nv">refqname</span><span class="o">=</span>module/examples/a-deployment -d <span class="nv">mutable</span><span class="o">=</span><span class="nb">true</span> -u &lt;user&gt;:&lt;password&gt; -X POST -H <span class="s2">"Content-Type: text/plain"</span> -D -
</code></pre>

<blockquote>
<p>The above command returns a header structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Tue, 13 May 2014 11:29:56 GMT</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.1m4</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1400023769837&amp;com.sixsq.signature=eck79w5qyslb16ke31vfof2b9o6729mcsjgnsqc143nsgqkuepmkgqnaakv544x7nankz4875p0uyg8unl8d5m4dl60wzr6pcpn; Path=/</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">0</span>
</code></pre>

<p>Create a new scalable run from a predefined deployment.</p>

<p>The <strong>Location</strong> attribute in the response header provides the full url of the newly created run.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST https://nuv.la/run</code></p>

<h3 id="body-parameters">Body Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>refqname</td>
<td>true</td>
<td>Reference module from which to create a run. Must be a <em>Deployment</em> category - e.g. <em>module/SlipStream/deploy-slipstream-dpl</em>.</td>
</tr>
<tr>
<td>mutable</td>
<td>true</td>
<td>Define that the run is scalable - i.e., providing a possibility to add and remove node instances.</td>
</tr>
</tbody></table>

<aside class="notice">
Only <em>Orchestration</em> type run can be created as scalable.
</aside>

<h3 id="add-node-instances-to-a-scalable-run">Add node instances to a scalable Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e/centos_node -d <span class="nv">n</span><span class="o">=</span>2 -u &lt;user&gt;:&lt;password&gt; -X POST -H <span class="s2">"Content-Type: text/plain"</span> -D -
</code></pre>

<blockquote>
<p>The above command requests addition of two instances of the node type centos_node, returns 201 and the list of the created node instances in the body</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">text/plain; charset=UTF-8</span>
<span class="na">Content-length</span><span class="p">:</span> <span class="s">27</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.2.1</span>
<span class="na">Accept-ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Vary</span><span class="p">:</span> <span class="s">Accept-Charset, Accept-Encoding, Accept-Language, Accept</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Wed, 25 Jun 2014 21:49:19 GMT</span>
<span class="na">Set-cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1403776159248&amp;com.sixsq.signature=k82fu5qecds8f4grtvxjxkv698sdr3bw6wtieqrsanjnqjqg9eb6imoq217ww0stu9q23gi8y8y4rcovn7sse1ah65881j7k3hw; Path=/</span>

centos_node.2,centos_node.3
</code></pre>

<p>Add node instances on a scalable Run.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://nuv.la/run/&lt;run-uuid&gt;/&lt;node-name&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
<tr>
<td>node-name</td>
<td>true</td>
<td>Node name - e.g. <em>centos_node</em>.</td>
</tr>
</tbody></table>

<h4 id="body-parameters">Body Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>n</td>
<td>false</td>
<td>Defines a number of node instances to be added. If omitted, one node instance is added.</td>
</tr>
</tbody></table>

<h3 id="remove-node-instances-from-a-run">Remove node instances from a Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e/centos_node -d <span class="nv">ids</span><span class="o">=</span>1,2 -u &lt;user&gt;:&lt;password&gt; -X DELETE -D -
</code></pre>

<blockquote>
<p>The above command requests deletion of two instances with indices 1 and 2 of the node type centos_node and returns 204 on success.</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-length</span><span class="p">:</span> <span class="s">0</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.2.1</span>
<span class="na">Accept-ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Tue, 24 Jun 2014 14:09:01 GMT</span>
<span class="na">Set-cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1403662141504&amp;com.sixsq.signature=atvt4x3mc5p0b8komk26olefqeu392m9m63sb44t7k0t86rk2lw0n15o27al7ijm4opqhavh84fmqiti5xnewpldh3skm0rsuwq; Path=/</span>
</code></pre>

<p>Remove node instances from a Run.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://nuv.la/run/&lt;run-uuid&gt;/&lt;node-name&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
<tr>
<td>node-name</td>
<td>true</td>
<td>Node name - e.g. <em>centos_node</em>.</td>
</tr>
</tbody></table>

<h4 id="body-parameters">Body Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ids</td>
<td>true</td>
<td>Defines the comma separated list of indices of the node instances to be removed.</td>
</tr>
</tbody></table>

<h3 id="get-instance-names-of-a-node-in-run">Get instance names of a node in Run</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e/centos_node -u &lt;user&gt;:&lt;password&gt; <span class="s2">"Content-Type: text/plain"</span> -D -
</code></pre>

<blockquote>
<p>The above command requests a list of the instance names of the node centos_node.  On success, the return code is 200 and the body contains the comma separated list of the instance names.</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">text/plain; charset=UTF-8</span>
<span class="na">Content-length</span><span class="p">:</span> <span class="s">65</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">Restlet-Framework/2.2.1</span>
<span class="na">Accept-ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Vary</span><span class="p">:</span> <span class="s">Accept-Charset, Accept-Encoding, Accept-Language, Accept</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Wed, 25 Jun 2014 21:57:21 GMT</span>
<span class="na">Set-cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1403776630991&amp;com.sixsq.signature=-gkbwu2gknk54fcfbg5di4484bna1tttgn4na0za9fe4apgnkgjhcmc5b4mlqp5yzmnwkyf8meegow8iri4q2cz89a5pm3i7m5d7; Path=/</span>

centos_node.1,centos_node.2,centos_node.3
</code></pre>

<p>Get instance names of a node in Run.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/run/&lt;run-uuid&gt;/&lt;node-name&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
<tr>
<td>node-name</td>
<td>true</td>
<td>Node name - e.g. <em>centos_node</em>.</td>
</tr>
</tbody></table>

<h3 id="set-a-node-instance-(vm)-runtime-parameter">Set a node instance (VM) runtime parameter</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e/centos_node.1:my_parameter -d my_value -u &lt;user&gt;:&lt;password&gt; -X PUT
</code></pre>

<blockquote>
<p>The above command sets <code class="prettyprint">my_value</code> on the runtime parameter <code class="prettyprint">my_parameter</code> of
the node instance <code class="prettyprint">centos_node.1</code>. On success, the return code is 200. If the
body of the request is not provided or set to an empty string, the parameter is
said to be <code class="prettyprint">unset</code>. Please refer to the <code class="prettyprint">&quot;Get a node instance (VM) runtime parameter&quot;</code>
section for handling the cases of the parameters either being <code class="prettyprint">not yet set</code> or <code class="prettyprint">unset</code>.</p>
</blockquote>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">PUT https://nuv.la/run/&lt;run-uuid&gt;/&lt;node-instance-name&gt;:&lt;parameter-name&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
<tr>
<td>node-instance-name</td>
<td>true</td>
<td>Node instance name - e.g. <em>centos_node.1</em></td>
</tr>
<tr>
<td>parameter-name</td>
<td>true</td>
<td>Parameter name - e.g. <em>my_parameter</em></td>
</tr>
</tbody></table>

<h4 id="body-parameters">Body Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">value</code></td>
<td>false</td>
<td>The actual value of the parameter to be set</td>
</tr>
</tbody></table>

<h3 id="get-a-node-instance-(vm)-runtime-parameter">Get a node instance (VM) runtime parameter</h3>
<pre><code class="highlight shell">curl https://nuv.la/run/cce5ac6d-5465-4773-9875-66f21c65e15e/centos_node.1:my_parameter -u &lt;user&gt;:&lt;password&gt;
</code></pre>

<blockquote>
<p>On success, the above command returns the value of the runtime parameter
<code class="prettyprint">my_parameter</code> of the node instance <code class="prettyprint">centos_node.1</code> (if the parameter and the
node instance are present), and the value is returned as <code class="prettyprint">Content-Type: text/plain;
charset=UTF-8</code> (not XML).</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">nginx/1.8.0</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Wed, 06 May 2015 15:32:46 GMT</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">text/plain; charset=UTF-8</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">4</span>
<span class="na">Connection</span><span class="p">:</span> <span class="s">keep-alive</span>
<span class="na">Accept-Ranges</span><span class="p">:</span> <span class="s">bytes</span>
<span class="na">Vary</span><span class="p">:</span> <span class="s">Accept-Charset, Accept-Encoding, Accept-Language, Accept</span>
<span class="na">Set-Cookie</span><span class="p">:</span> <span class="s">com.sixsq.slipstream.cookie=com.sixsq.idtype=local&amp;com.sixsq.identifier=test&amp;com.sixsq.expirydate=1430969566000&amp;com.sixsq.signature=3nqx5dj24tw4bwocqem5jy5eel2g7ebszwtuj1vli9j316trq6023760pwdp6uzmi8bdtrzwc0addw1p0yff5ube4dntiydt5st; Path=/; Expires=Thu, 07 May 2015 03:32:46 GMT</span>
<span class="na">Strict-Transport-Security</span><span class="p">:</span> <span class="s">max-age=31536000; includeSubdomains</span>

my_value
</code></pre>

<blockquote>
<p>For better handling of the error cases the &ldquo;Accept: application/xml&rdquo; header should be used.
In case either node instance or parameter does not exist, <code class="prettyprint">404</code> error code is
returned and the error message in the XML format looks like the following:</p>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;error</span> <span class="na">code=</span><span class="s">"404"</span> <span class="na">reason=</span><span class="s">"Not Found"</span> <span class="na">detail=</span><span class="s">"Unknown key centos_node.1:my_parameter"</span> <span class="na">specificationUri=</span><span class="s">"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5"</span><span class="nt">&gt;</span>
Unknown key centos_node.1:my_parameter
<span class="nt">&lt;/error&gt;</span>
</code></pre>

<blockquote>
<p>In case the parameter value is not yet set (i.e., it&rsquo;s an empty string), the
server returns <code class="prettyprint">412</code> - <code class="prettyprint">Precondition Failed</code>:</p>
</blockquote>
<pre><code class="highlight xml"><span class="nt">&lt;error</span> <span class="na">code=</span><span class="s">"412"</span> <span class="na">reason=</span><span class="s">"Precondition Failed"</span> <span class="na">detail=</span><span class="s">"key centos_node.1:my_parameter not yet set"</span> <span class="na">specificationUri=</span><span class="s">"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.13"</span><span class="nt">&gt;</span>
key centos_node.1:my_parameter not yet set
<span class="nt">&lt;/error&gt;</span>
</code></pre>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/run/&lt;run-uuid&gt;/&lt;node-instance-name&gt;:&lt;parameter-name&gt;</code></p>

<h4 id="url-parameters">URL Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>run-uuid</td>
<td>true</td>
<td>Run unique identifier - e.g. <em>fa3b9652-9dac-49e2-9573-b761777c8238</em>.</td>
</tr>
<tr>
<td>node-instance-name</td>
<td>true</td>
<td>Node instance name - e.g. <em>centos_node.1</em></td>
</tr>
<tr>
<td>parameter-name</td>
<td>true</td>
<td>Parameter name - e.g. <em>my_parameter</em></td>
</tr>
</tbody></table>

<h2 id="deployment-(cimi)">Deployment (CIMI)</h2>

<p>This is a prototype resource that will eventually replace the legacy
Run resource.  This should not be used in production at this time.</p>

<h2 id="deploymenttemplate-(cimi)">DeploymentTemplate (CIMI)</h2>

<p>This is a prototype resource that allows the Deployment resource to be
created. This resource should not be used in production at this time. </p>

<h2 id="event-(cimi)">Event (CIMI)</h2>

<p>Event resources provide a timestamp for the occurrence of some action.
These are used within the SlipStream server to mark changes in the
lifecycle of a cloud application and for other important actions. </p>

<p>Some of the lifecycle changes that generate events are:</p>

<ul>
<li>State transition</li>
<li>Termination (manual)</li>
<li>First abort call (with reason)</li>
<li>Scaling up or down</li>
</ul>

<aside class="warning">
An event can <strong>not</strong> be updated, only deleted.
</aside>

<h3 id="list-all-events">List all Events</h3>
<pre><code class="highlight shell">curl https://nuv.la/api/event/ -b cookie-user.txt -D -
</code></pre>

<blockquote>
<p>The above command returns json structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">2284</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 13:15:48 GMT</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"events"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"content"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"resource"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Run/45614147-aed1-4a24-889d-6365b0b1f2cd"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Started"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-19T09:39:38.238Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"state"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-19T09:39:38.238Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/0d78db78-1b98-4bd1-ba14-bf378da68a66"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"severity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"joe"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ANON"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ALL"</span><span class="w">
      </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Action/delete"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/0d78db78-1b98-4bd1-ba14-bf378da68a66"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Event"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-10T08:20:00.0Z"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Action/add"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ALL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ANON"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ADMIN"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/EventCollection"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"count"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Lists all events accessible by the authenticated user. A user has the right to see an event if she is the owner, or is a super user.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/api/event/</code></p>

<h3 id="create-an-event">Create an Event</h3>
<pre><code class="highlight shell">curl https://nuv.la/api/event -d <span class="s2">"{ </span><span class="se">\"</span><span class="s2">acl</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\"</span><span class="s2">owner</span><span class="se">\"</span><span class="s2">: {</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">USER</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">principal</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">joe</span><span class="se">\"</span><span class="s2">},    </span><span class="se">\"</span><span class="s2">rules</span><span class="se">\"</span><span class="s2">: [{</span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">ROLE</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">prinipal</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">ANON</span><span class="se">\"</span><span class="s2">, </span><span class="se">\"</span><span class="s2">right</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">ALL</span><span class="se">\"</span><span class="s2">}]},    </span><span class="se">\"</span><span class="s2">id</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">123</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">created</span><span class="se">\"</span><span class="s2"> :  </span><span class="se">\"</span><span class="s2">2015-01-16T08:20:00.0Z</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">updated</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">2015-01-16T08:20:00.0Z</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">resourceURI</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">http://slipstream.sixsq.com/ssclj/1/Event</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">timestamp</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">2015-01-10T08:20:00.0Z</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">content</span><span class="se">\"</span><span class="s2"> :  { </span><span class="se">\"</span><span class="s2">resource</span><span class="se">\"</span><span class="s2">:  {</span><span class="se">\"</span><span class="s2">href</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">Run/45614147-aed1-4a24-889d-6365b0b1f2cd</span><span class="se">\"</span><span class="s2">},    </span><span class="se">\"</span><span class="s2">state</span><span class="se">\"</span><span class="s2"> : </span><span class="se">\"</span><span class="s2">Started</span><span class="se">\"</span><span class="s2"> } ,    </span><span class="se">\"</span><span class="s2">type</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">state</span><span class="se">\"</span><span class="s2">,    </span><span class="se">\"</span><span class="s2">severity</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">medium</span><span class="se">\"</span><span class="s2">}"</span> -X POST -H <span class="s2">"Content-Type: application/json"</span> -b cookie-user.txt -D -
</code></pre>

<blockquote>
<p>The above command returns a json structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Location</span><span class="p">:</span> <span class="s">Event/257cf1bd-1397-4296-8124-bb2213425b6e</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">152</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 12:47:38 GMT</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"created Event/257cf1bd-1397-4296-8124-bb2213425b6e"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/257cf1bd-1397-4296-8124-bb2213425b6e"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
<p>In case of error (e.g invalid value for <code class="prettyprint">severity</code>), the following json is returned (note that the message details the origin of the problem):</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">400</span> <span class="ne">Bad Request</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">232</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 13:48:11 GMT</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"resource does not satisfy defined schema: {:acl {:rules [{:prinicpal disallowed-key, :principal missing-required-key}]}, :severity (not (#{\"low\" \"high\" \"medium\" \"critical\"} \"urgent\"))}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Create an event that contains information (mainly timestamp and state) related to a target resource.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">POST https://nuv.la/api/event</code></p>

<h4 id="body-parameters">Body Parameters</h4>

<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>timestamp</td>
<td>true</td>
<td>The timestamp (GMT time) of the event (not to be confused with created and updated timestamps of the resource representing the event)</td>
</tr>
<tr>
<td>content</td>
<td>true</td>
<td>Structure containing the resource reference (i.e the <strong>target</strong> of this event) and its state</td>
</tr>
<tr>
<td>type</td>
<td>true</td>
<td>Accepted values: <code class="prettyprint">state</code> and <code class="prettyprint">alarm</code></td>
</tr>
<tr>
<td>severity</td>
<td>true</td>
<td>Accepted values: <code class="prettyprint">critical</code>, <code class="prettyprint">high</code>, <code class="prettyprint">medium</code> and <code class="prettyprint">low</code></td>
</tr>
</tbody></table>

<h3 id="get-an-event">Get an Event</h3>
<pre><code class="highlight shell">curl https://nuv.la/api/event/4605ee06-ccda-48f5-a481-23c6ab296b0d -b cookie-user.txt -D -
</code></pre>

<blockquote>
<p>The above command returns a json structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">869</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 13:17:06 GMT</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"content"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"resource"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Run/45614147-aed1-4a24-889d-6365b0b1f2cd"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"state"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Started"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"updated"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-19T12:46:16.766Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"state"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-03-19T12:46:16.766Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/4605ee06-ccda-48f5-a481-23c6ab296b0d"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"severity"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"medium"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"acl"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"owner"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"USER"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"joe"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rules"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ROLE"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"principal"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ANON"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"right"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"ALL"</span><span class="w">
    </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"operations"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"rel"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Action/delete"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"href"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/4605ee06-ccda-48f5-a481-23c6ab296b0d"</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="s2">"resourceURI"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://sixsq.com/slipstream/1/Event"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"timestamp"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-01-10T08:20:00.0Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Get a specific event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">GET https://nuv.la/api/event/&lt;event-uuid&gt;</code></p>

<h3 id="delete-an-event">Delete an Event</h3>
<pre><code class="highlight shell">curl -X DELETE  https://nuv.la/api/event/85d787ea-a06e-4577-bf2b-1e681d5769a2 -b cookie-user.txt -D -
</code></pre>

<blockquote>
<p>The above command returns a json structured like this:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">152</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 13:26:27 GMT</span>
</code></pre>

<blockquote>
<p>When providing an invalid event-uuid, here is the response:</p>
</blockquote>
<pre><code class="highlight http"><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">404</span> <span class="ne">Not Found</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Content-Length</span><span class="p">:</span> <span class="s">102</span>
<span class="na">Server</span><span class="p">:</span> <span class="s">http-kit</span>
<span class="na">Date</span><span class="p">:</span> <span class="s">Thu, 19 Mar 2015 13:35:57 GMT</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/wrong-uuid not found"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resource-id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Event/wrong-uuid"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Delete a specific (the event-uuid is known) event.</p>

<h4 id="http-request">HTTP Request</h4>

<p><code class="prettyprint">DELETE https://nuv.la/api/event/&lt;event-uuid&gt;</code></p>

<h1 id="errors">Errors</h1>

<p>The SlipStream REST API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request is inconsistent</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your username/password of cookie is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; You don&rsquo;t have the rights to perform this action</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The requested resource doesn&rsquo;t exist</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a resource with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that is not supported</td>
</tr>
<tr>
<td>409</td>
<td>The request could not be processed because of conflict in the request, such as an edit conflict in the case of multiple updates.</td>
</tr>
<tr>
<td>413</td>
<td>The request is larger than the server is willing or able to process.</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot &ndash; The all time classic :-)</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; The user has sent too many requests in a given amount of time.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We have a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<h1 id="deprecated-resources">Deprecated Resources</h1>

<p>The following sections describe the details of older, deprecated
resources.  These resource may still work, but developers are
encouraged to move to the given replacement resources.</p>

<h2 id="legacy-user-resource">Legacy User Resource</h2>

<p><code class="prettyprint">https://nuv.la/user</code></p>

<p>The legacy user resource is deprecated. All of the user information
has been migrated to CIMI resources; use those in preference to this
resource. Internally, this resource is implemented via the CIMI
resources.</p>

<aside class="warning">

Developers are strongly recommended to migrate to the CIMI
resources. The resource will be removed in a future SlipStream
release and announced via the release notes. 

</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
